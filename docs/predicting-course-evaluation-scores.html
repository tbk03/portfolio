<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Predicting course evaluation scores | Data Science Portfolio</title>
  <meta name="description" content="holding text" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Predicting course evaluation scores | Data Science Portfolio" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="holding text" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Predicting course evaluation scores | Data Science Portfolio" />
  
  <meta name="twitter:description" content="holding text" />
  

<meta name="author" content="Chris J. Martin" />


<meta name="date" content="2021-04-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="estimating-the-proportion-of-plastic-waste-countries-mismanage.html"/>
<link rel="next" href="visualising-green-space-deprivation-across-the-english-regions.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://tbk03.github.io/portfolio/index.html">Portfolio - Chris J. Martin</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="part"><span><b>I Linear Regression Projects</b></span></li>
<li class="chapter" data-level="2" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><i class="fa fa-check"></i><b>2</b> Predicting the amount of plastic waste a country produces each year</a>
<ul>
<li class="chapter" data-level="2.1" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#data-importing"><i class="fa fa-check"></i><b>2.1</b> Data importing</a></li>
<li class="chapter" data-level="2.2" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#data-cleaning"><i class="fa fa-check"></i><b>2.2</b> Data cleaning</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#missing-data"><i class="fa fa-check"></i><b>2.2.1</b> Missing data</a></li>
<li class="chapter" data-level="2.2.2" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#inspecting-the-data-for-the-country-variable"><i class="fa fa-check"></i><b>2.2.2</b> Inspecting the data for the country variable</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>2.3</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="2.4" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#modelling-a-simple-regression-model"><i class="fa fa-check"></i><b>2.4</b> Modelling: A simple regression model</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#model-fitting"><i class="fa fa-check"></i><b>2.4.1</b> Model fitting</a></li>
<li class="chapter" data-level="2.4.2" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#uncertainty-in-the-model-fit"><i class="fa fa-check"></i><b>2.4.2</b> Uncertainty in the model fit</a></li>
<li class="chapter" data-level="2.4.3" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#reviewing-the-residuals"><i class="fa fa-check"></i><b>2.4.3</b> Reviewing the residuals</a></li>
<li class="chapter" data-level="2.4.4" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#bayesian-r-squared"><i class="fa fa-check"></i><b>2.4.4</b> Bayesian R squared</a></li>
<li class="chapter" data-level="2.4.5" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#cross-validation-and-log-scores"><i class="fa fa-check"></i><b>2.4.5</b> Cross validation and log scores</a></li>
<li class="chapter" data-level="2.4.6" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#graphical-posterior-predictive-checks"><i class="fa fa-check"></i><b>2.4.6</b> Graphical posterior predictive checks</a></li>
<li class="chapter" data-level="2.4.7" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#summary-of-the-model-fitting-process"><i class="fa fa-check"></i><b>2.4.7</b> Summary of the model fitting process</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html"><a href="predicting-the-amount-of-plastic-waste-a-country-produces-each-year.html#applying-the-model-to-new-data"><i class="fa fa-check"></i><b>2.5</b> Applying the model to new data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="estimating-the-proportion-of-plastic-waste-countries-mismanage.html"><a href="estimating-the-proportion-of-plastic-waste-countries-mismanage.html"><i class="fa fa-check"></i><b>3</b> Estimating the proportion of plastic waste countries mismanage</a>
<ul>
<li class="chapter" data-level="3.1" data-path="estimating-the-proportion-of-plastic-waste-countries-mismanage.html"><a href="estimating-the-proportion-of-plastic-waste-countries-mismanage.html#data-importing-and-cleaning"><i class="fa fa-check"></i><b>3.1</b> Data importing and cleaning</a></li>
<li class="chapter" data-level="3.2" data-path="estimating-the-proportion-of-plastic-waste-countries-mismanage.html"><a href="estimating-the-proportion-of-plastic-waste-countries-mismanage.html#exploratory-data-analysis-1"><i class="fa fa-check"></i><b>3.2</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="3.3" data-path="estimating-the-proportion-of-plastic-waste-countries-mismanage.html"><a href="estimating-the-proportion-of-plastic-waste-countries-mismanage.html#modelling-piecewise-linear-regression"><i class="fa fa-check"></i><b>3.3</b> Modelling: Piecewise linear regression</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="estimating-the-proportion-of-plastic-waste-countries-mismanage.html"><a href="estimating-the-proportion-of-plastic-waste-countries-mismanage.html#fitting-the-model"><i class="fa fa-check"></i><b>3.3.1</b> Fitting the model</a></li>
<li class="chapter" data-level="3.3.2" data-path="estimating-the-proportion-of-plastic-waste-countries-mismanage.html"><a href="estimating-the-proportion-of-plastic-waste-countries-mismanage.html#interpreting-the-model-coefficients"><i class="fa fa-check"></i><b>3.3.2</b> Interpreting the model coefficients</a></li>
<li class="chapter" data-level="3.3.3" data-path="estimating-the-proportion-of-plastic-waste-countries-mismanage.html"><a href="estimating-the-proportion-of-plastic-waste-countries-mismanage.html#some-quick-diagnostics"><i class="fa fa-check"></i><b>3.3.3</b> Some quick diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="estimating-the-proportion-of-plastic-waste-countries-mismanage.html"><a href="estimating-the-proportion-of-plastic-waste-countries-mismanage.html#reflections-and-next-steps"><i class="fa fa-check"></i><b>3.4</b> Reflections and next steps</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html"><i class="fa fa-check"></i><b>4</b> Predicting course evaluation scores</a>
<ul>
<li class="chapter" data-level="4.1" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#data-importing-and-cleaning-1"><i class="fa fa-check"></i><b>4.1</b> Data importing and cleaning</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#importing-the-data"><i class="fa fa-check"></i><b>4.1.1</b> Importing the data</a></li>
<li class="chapter" data-level="4.1.2" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#checking-for-missing-values"><i class="fa fa-check"></i><b>4.1.2</b> Checking for missing values</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#exploratory-data-analysis-2"><i class="fa fa-check"></i><b>4.2</b> Exploratory data analysis</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#the-response-variable"><i class="fa fa-check"></i><b>4.2.1</b> The response variable</a></li>
<li class="chapter" data-level="4.2.2" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#potential-explanatory-variables"><i class="fa fa-check"></i><b>4.2.2</b> Potential explanatory variables</a></li>
<li class="chapter" data-level="4.2.3" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#relationships-between-variables"><i class="fa fa-check"></i><b>4.2.3</b> Relationships between variables</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#fitting-the-model-1"><i class="fa fa-check"></i><b>4.3</b> Fitting the model</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#splitting-the-data"><i class="fa fa-check"></i><b>4.3.1</b> Splitting the data</a></li>
<li class="chapter" data-level="4.3.2" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#minimal-and-maximal-models"><i class="fa fa-check"></i><b>4.3.2</b> Minimal and maximal models</a></li>
<li class="chapter" data-level="4.3.3" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#iteration-1-adding-two-continuous-variables"><i class="fa fa-check"></i><b>4.3.3</b> Iteration 1: Adding two continuous variables</a></li>
<li class="chapter" data-level="4.3.4" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#iteration-2-adding-in-discrete-variables"><i class="fa fa-check"></i><b>4.3.4</b> Iteration 2: adding in discrete variables</a></li>
<li class="chapter" data-level="4.3.5" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#iteration-3-adding-in-interactions"><i class="fa fa-check"></i><b>4.3.5</b> Iteration 3: adding in interactions</a></li>
<li class="chapter" data-level="4.3.6" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#iteration-4-reducing-number-of-discrete-predictors-used-to-simplify-the-model"><i class="fa fa-check"></i><b>4.3.6</b> Iteration 4: reducing number of discrete predictors used to simplify the model</a></li>
<li class="chapter" data-level="4.3.7" data-path="predicting-course-evaluation-scores.html"><a href="predicting-course-evaluation-scores.html#summary-of-model-fitting-process"><i class="fa fa-check"></i><b>4.3.7</b> Summary of model fitting process</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Vizualisation Projects</b></span></li>
<li class="chapter" data-level="5" data-path="visualising-green-space-deprivation-across-the-english-regions.html"><a href="visualising-green-space-deprivation-across-the-english-regions.html"><i class="fa fa-check"></i><b>5</b> Visualising green space deprivation across the English regions</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science Portfolio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="predicting-course-evaluation-scores" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Predicting course evaluation scores</h1>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="predicting-course-evaluation-scores.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import packages used in this notebook</span></span>
<span id="cb78-2"><a href="predicting-course-evaluation-scores.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>({</span>
<span id="cb78-3"><a href="predicting-course-evaluation-scores.html#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">suppressWarnings</span>({</span>
<span id="cb78-4"><a href="predicting-course-evaluation-scores.html#cb78-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb78-5"><a href="predicting-course-evaluation-scores.html#cb78-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># core libraries</span></span>
<span id="cb78-6"><a href="predicting-course-evaluation-scores.html#cb78-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(tidyverse)</span>
<span id="cb78-7"><a href="predicting-course-evaluation-scores.html#cb78-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(tidymodels)</span>
<span id="cb78-8"><a href="predicting-course-evaluation-scores.html#cb78-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(rstanarm)</span>
<span id="cb78-9"><a href="predicting-course-evaluation-scores.html#cb78-9" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb78-10"><a href="predicting-course-evaluation-scores.html#cb78-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># helper libraries</span></span>
<span id="cb78-11"><a href="predicting-course-evaluation-scores.html#cb78-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(janitor)    <span class="co"># for cleaning names</span></span>
<span id="cb78-12"><a href="predicting-course-evaluation-scores.html#cb78-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(skimr)      <span class="co"># for summary statistic reports</span></span>
<span id="cb78-13"><a href="predicting-course-evaluation-scores.html#cb78-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(glue)       <span class="co"># for string formatting</span></span>
<span id="cb78-14"><a href="predicting-course-evaluation-scores.html#cb78-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(infer)      <span class="co"># for exploratory inference</span></span>
<span id="cb78-15"><a href="predicting-course-evaluation-scores.html#cb78-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(patchwork)  <span class="co"># for displaying multiple plots together</span></span>
<span id="cb78-16"><a href="predicting-course-evaluation-scores.html#cb78-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(corrr)      <span class="co"># for correlation analysis</span></span>
<span id="cb78-17"><a href="predicting-course-evaluation-scores.html#cb78-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(broom.mixed)<span class="co"># for tidying stan objects</span></span>
<span id="cb78-18"><a href="predicting-course-evaluation-scores.html#cb78-18" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb78-19"><a href="predicting-course-evaluation-scores.html#cb78-19" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="predicting-course-evaluation-scores.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># global setting for notebook</span></span>
<span id="cb79-2"><a href="predicting-course-evaluation-scores.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_light</span>())</span>
<span id="cb79-3"><a href="predicting-course-evaluation-scores.html#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="predicting-course-evaluation-scores.html#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="co"># import my own plotting functions for styling plots</span></span>
<span id="cb79-5"><a href="predicting-course-evaluation-scores.html#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;plotting_functions.R&quot;</span>)</span>
<span id="cb79-6"><a href="predicting-course-evaluation-scores.html#cb79-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-7"><a href="predicting-course-evaluation-scores.html#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="co"># import my own functions for producing summary stats (which use on skimr)</span></span>
<span id="cb79-8"><a href="predicting-course-evaluation-scores.html#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;stats_functions.R&quot;</span>)</span></code></pre></div>
<div id="data-importing-and-cleaning-1" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Data importing and cleaning</h2>
<div id="importing-the-data" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Importing the data</h3>
<p>The data I am using in this project is available in the github repository for the book ‘Regression and Other Stories.’ So, I can read in the csv directly from the repository.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="predicting-course-evaluation-scores.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set url for dataset</span></span>
<span id="cb80-2"><a href="predicting-course-evaluation-scores.html#cb80-2" aria-hidden="true" tabindex="-1"></a>data_url <span class="ot">&lt;-</span> <span class="st">&quot;https://raw.githubusercontent.com/avehtari/ROS-Examples/master/Beauty/data/ProfEvaltnsBeautyPublic.csv&quot;</span></span>
<span id="cb80-3"><a href="predicting-course-evaluation-scores.html#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="predicting-course-evaluation-scores.html#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="co"># read data from github</span></span>
<span id="cb80-5"><a href="predicting-course-evaluation-scores.html#cb80-5" aria-hidden="true" tabindex="-1"></a>teaching_eval <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(data_url) <span class="sc">%&gt;%</span> </span>
<span id="cb80-6"><a href="predicting-course-evaluation-scores.html#cb80-6" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="co"># try to clean up names</span></span>
<span id="cb80-7"><a href="predicting-course-evaluation-scores.html#cb80-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-8"><a href="predicting-course-evaluation-scores.html#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="co"># display dataframe for initial inspection</span></span>
<span id="cb80-9"><a href="predicting-course-evaluation-scores.html#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(teaching_eval)</span></code></pre></div>
<pre><code>## Rows: 463
## Columns: 64
## $ tenured           &lt;dbl&gt; 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0~
## $ profnumber        &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1~
## $ minority          &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0~
## $ age               &lt;dbl&gt; 36, 59, 51, 40, 31, 62, 33, 51, 33, 47, 35, 37, 42, ~
## $ beautyf2upper     &lt;dbl&gt; 6, 2, 5, 4, 9, 5, 5, 6, 5, 6, 4, 5, 5, 5, 7, 3, 1, 6~
## $ beautyflowerdiv   &lt;dbl&gt; 5, 4, 5, 2, 7, 6, 4, 4, 3, 5, 5, 4, 4, 3, 6, 2, 3, 3~
## $ beautyfupperdiv   &lt;dbl&gt; 7, 4, 2, 5, 9, 6, 4, 6, 7, 7, 7, 5, 7, 3, 7, 4, 4, 5~
## $ beautym2upper     &lt;dbl&gt; 6, 3, 3, 2, 6, 6, 4, 3, 5, 6, 7, 4, 5, 5, 4, 7, 3, 4~
## $ beautymlowerdiv   &lt;dbl&gt; 2, 2, 2, 3, 7, 5, 4, 2, 5, 3, 2, 3, 4, 1, 5, 5, 2, 4~
## $ beautymupperdiv   &lt;dbl&gt; 4, 3, 3, 3, 6, 5, 4, 3, 3, 6, 4, 5, 4, 7, 4, 4, 2, 4~
## $ btystdave         &lt;dbl&gt; 0.2015666, -0.8260813, -0.6603327, -0.7663125, 1.421~
## $ btystdf2u         &lt;dbl&gt; 0.2893519, -1.6193560, -0.1878249, -0.6650018, 1.720~
## $ btystdfl          &lt;dbl&gt; 0.4580018, -0.0735065, 0.4580018, -1.1365230, 1.5210~
## $ btystdfu          &lt;dbl&gt; 0.8758139, -0.5770065, -1.5455530, -0.0927330, 1.844~
## $ btystdm2u         &lt;dbl&gt; 0.6817153, -1.1319040, -1.1319040, -1.7364440, 0.681~
## $ btystdml          &lt;dbl&gt; -0.9000649, -0.9000649, -0.9000649, -0.3125226, 2.03~
## $ btystdmu          &lt;dbl&gt; -0.1954181, -0.6546507, -0.6546507, -0.6546507, 0.72~
## $ class1            &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class2            &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class3            &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class4            &lt;dbl&gt; 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0~
## $ class5            &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class6            &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class7            &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class8            &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class9            &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0~
## $ class10           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0~
## $ class11           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class12           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class13           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class14           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class15           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class16           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class17           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class18           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class19           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class20           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class21           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class22           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class23           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class24           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class25           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class26           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class27           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class28           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class29           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ class30           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ courseevaluation  &lt;dbl&gt; 4.3, 4.5, 3.7, 4.3, 4.4, 4.2, 4.0, 3.4, 4.5, 3.9, 3.~
## $ didevaluation     &lt;dbl&gt; 24, 17, 55, 40, 42, 182, 33, 25, 48, 16, 18, 30, 28,~
## $ female            &lt;dbl&gt; 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0~
## $ formal            &lt;dbl&gt; 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ fulldept          &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~
## $ lower             &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1~
## $ multipleclass     &lt;dbl&gt; 1, 0, 1, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0~
## $ nonenglish        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0~
## $ onecredit         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ percentevaluating &lt;dbl&gt; 55.81395, 85.00000, 100.00000, 86.95652, 87.50000, 6~
## $ profevaluation    &lt;dbl&gt; 4.7, 4.6, 4.1, 4.5, 4.8, 4.4, 4.4, 3.4, 4.8, 4.0, 3.~
## $ students          &lt;dbl&gt; 43, 20, 55, 46, 48, 282, 41, 41, 60, 19, 25, 34, 40,~
## $ tenuretrack       &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0~
## $ blkandwhite       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0~
## $ btystdvariance    &lt;dbl&gt; 2.1298060, 1.3860810, 2.5374350, 1.7605770, 1.693100~
## $ btystdavepos      &lt;dbl&gt; 0.201567, 0.000000, 0.000000, 0.000000, 1.421450, 0.~
## $ btystdaveneg      &lt;dbl&gt; 0.000000, -0.826081, -0.660333, -0.766312, 0.000000,~</code></pre>
<p>Next I focused down on variables within the dataset to be used in the exploratory data analysis and modeling below. I reviewed the <a href="https://github.com/avehtari/ROS-Examples/blob/master/Beauty/data/ProfEvaltnsBeautyPublic.log">data code book</a> to identify the outcome variable and promising potential predictor variables. A number of variables have been dropped in the process of focusing down the dataset , as I thought these dropped variable were unlikely to important predictors of <code>course_evaluation</code> scores. This was a judgment based on my experiences of working in various universities over a decade or so.</p>
<p>Due to the nature of the variable names in the dataset, automatically cleaning all variables names to make readable and easy to interpret was not possible. So, in the process of focusing down the dataset I renamed various variables to make them easier to remember, interpret and work with. I also reorder the variables to group them in a more logical order: an outcome variable, followed by potential predictors relating to the professor, and then potential predictors relating to the class.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="predicting-course-evaluation-scores.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># focus down on features in the dataset with a good potential to act as predictors</span></span>
<span id="cb82-2"><a href="predicting-course-evaluation-scores.html#cb82-2" aria-hidden="true" tabindex="-1"></a>teaching_eval_focus <span class="ot">&lt;-</span> teaching_eval <span class="sc">%&gt;%</span></span>
<span id="cb82-3"><a href="predicting-course-evaluation-scores.html#cb82-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb82-4"><a href="predicting-course-evaluation-scores.html#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb82-5"><a href="predicting-course-evaluation-scores.html#cb82-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-6"><a href="predicting-course-evaluation-scores.html#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># select and rename outcome variable</span></span>
<span id="cb82-7"><a href="predicting-course-evaluation-scores.html#cb82-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">course_evaluation =</span> courseevaluation,</span>
<span id="cb82-8"><a href="predicting-course-evaluation-scores.html#cb82-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-9"><a href="predicting-course-evaluation-scores.html#cb82-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># select and rename potential predictor variables relating to the professor</span></span>
<span id="cb82-10"><a href="predicting-course-evaluation-scores.html#cb82-10" aria-hidden="true" tabindex="-1"></a>    tenured<span class="sc">:</span>age,</span>
<span id="cb82-11"><a href="predicting-course-evaluation-scores.html#cb82-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">prof_ave_rating =</span> profevaluation,</span>
<span id="cb82-12"><a href="predicting-course-evaluation-scores.html#cb82-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">prof_ave_beauty_rating =</span> btystdave,</span>
<span id="cb82-13"><a href="predicting-course-evaluation-scores.html#cb82-13" aria-hidden="true" tabindex="-1"></a>    female, formal, </span>
<span id="cb82-14"><a href="predicting-course-evaluation-scores.html#cb82-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">non_native_english =</span> nonenglish,</span>
<span id="cb82-15"><a href="predicting-course-evaluation-scores.html#cb82-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">tenure_track =</span> tenuretrack,</span>
<span id="cb82-16"><a href="predicting-course-evaluation-scores.html#cb82-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-17"><a href="predicting-course-evaluation-scores.html#cb82-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># select and rename potential predictor relating relating to the course </span></span>
<span id="cb82-18"><a href="predicting-course-evaluation-scores.html#cb82-18" aria-hidden="true" tabindex="-1"></a>    lower,</span>
<span id="cb82-19"><a href="predicting-course-evaluation-scores.html#cb82-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">multiple_prof =</span> multipleclass,</span>
<span id="cb82-20"><a href="predicting-course-evaluation-scores.html#cb82-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">one_credit =</span> onecredit,</span>
<span id="cb82-21"><a href="predicting-course-evaluation-scores.html#cb82-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">eval_response_rate =</span> percentevaluating,</span>
<span id="cb82-22"><a href="predicting-course-evaluation-scores.html#cb82-22" aria-hidden="true" tabindex="-1"></a>    students,</span>
<span id="cb82-23"><a href="predicting-course-evaluation-scores.html#cb82-23" aria-hidden="true" tabindex="-1"></a>    class1<span class="sc">:</span>class30 <span class="co"># dummy variables</span></span>
<span id="cb82-24"><a href="predicting-course-evaluation-scores.html#cb82-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb82-25"><a href="predicting-course-evaluation-scores.html#cb82-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb82-26"><a href="predicting-course-evaluation-scores.html#cb82-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-27"><a href="predicting-course-evaluation-scores.html#cb82-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Move a potential indentifer variable to the front of the dataframe </span></span>
<span id="cb82-28"><a href="predicting-course-evaluation-scores.html#cb82-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and rename for consistency</span></span>
<span id="cb82-29"><a href="predicting-course-evaluation-scores.html#cb82-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">prof_number =</span> profnumber)  <span class="sc">%&gt;%</span> </span>
<span id="cb82-30"><a href="predicting-course-evaluation-scores.html#cb82-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(prof_number, <span class="at">.before =</span> course_evaluation)</span>
<span id="cb82-31"><a href="predicting-course-evaluation-scores.html#cb82-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-32"><a href="predicting-course-evaluation-scores.html#cb82-32" aria-hidden="true" tabindex="-1"></a>teaching_eval_focus  </span></code></pre></div>
<pre><code>## # A tibble: 463 x 46
##    prof_number course_evaluation tenured minority   age prof_ave_rating
##          &lt;dbl&gt;             &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;
##  1           1               4.3       0        1    36             4.7
##  2           2               4.5       1        0    59             4.6
##  3           3               3.7       1        0    51             4.1
##  4           4               4.3       1        0    40             4.5
##  5           5               4.4       0        0    31             4.8
##  6           6               4.2       1        0    62             4.4
##  7           7               4         0        0    33             4.4
##  8           8               3.4       1        0    51             3.4
##  9           9               4.5       0        0    33             4.8
## 10          10               3.9       0        0    47             4  
## # ... with 453 more rows, and 40 more variables: prof_ave_beauty_rating &lt;dbl&gt;,
## #   female &lt;dbl&gt;, formal &lt;dbl&gt;, non_native_english &lt;dbl&gt;, tenure_track &lt;dbl&gt;,
## #   lower &lt;dbl&gt;, multiple_prof &lt;dbl&gt;, one_credit &lt;dbl&gt;,
## #   eval_response_rate &lt;dbl&gt;, students &lt;dbl&gt;, class1 &lt;dbl&gt;, class2 &lt;dbl&gt;,
## #   class3 &lt;dbl&gt;, class4 &lt;dbl&gt;, class5 &lt;dbl&gt;, class6 &lt;dbl&gt;, class7 &lt;dbl&gt;,
## #   class8 &lt;dbl&gt;, class9 &lt;dbl&gt;, class10 &lt;dbl&gt;, class11 &lt;dbl&gt;, class12 &lt;dbl&gt;,
## #   class13 &lt;dbl&gt;, class14 &lt;dbl&gt;, class15 &lt;dbl&gt;, class16 &lt;dbl&gt;, class17 &lt;dbl&gt;,
## #   class18 &lt;dbl&gt;, class19 &lt;dbl&gt;, class20 &lt;dbl&gt;, class21 &lt;dbl&gt;, class22 &lt;dbl&gt;,
## #   class23 &lt;dbl&gt;, class24 &lt;dbl&gt;, class25 &lt;dbl&gt;, class26 &lt;dbl&gt;, class27 &lt;dbl&gt;,
## #   class28 &lt;dbl&gt;, class29 &lt;dbl&gt;, class30 &lt;dbl&gt;</code></pre>
</div>
<div id="checking-for-missing-values" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Checking for missing values</h3>
<p>Next I checked for missing data. While importing the data I notice there were 30 dummy variables used to identify the class being evaluated. I wanted to look in a bit more detail at potential missing values across the dummy variables. So, first I removed the dummy variables and looked at all the other variables. From the missing values check below it looks like this dataset has already to processed as not <code>NA</code>s have been identified.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="predicting-course-evaluation-scores.html#cb84-1" aria-hidden="true" tabindex="-1"></a>visdat<span class="sc">::</span><span class="fu">vis_miss</span>(teaching_eval_focus <span class="sc">%&gt;%</span> </span>
<span id="cb84-2"><a href="predicting-course-evaluation-scores.html#cb84-2" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">select</span>(<span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">&quot;class&quot;</span>)))</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>At first glance the there are no <code>NA</code>s identified for the dummy variables, for all pairs of observations of observations and dummy variables either a <code>1</code> or a <code>0</code> is recorded.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="predicting-course-evaluation-scores.html#cb85-1" aria-hidden="true" tabindex="-1"></a>visdat<span class="sc">::</span><span class="fu">vis_miss</span>(teaching_eval_focus <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="predicting-course-evaluation-scores.html#cb85-2" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;class&quot;</span>)))</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>However, if looking at these dummy variables in more detail it is clear that a lot of data is missing. By summing the all the dummy variables for a given observation, we can see if any classes are recorded for each observation. I would expect this to be <code>1</code> where a class is recorded and <code>0</code> where a class is not recorded. Hence, in this context a <code>0</code> actually corresponds to a missing value and in the plot below we can see that for approximately two thirds of observations a class is not recorded.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="predicting-course-evaluation-scores.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check if each evaluation has a class (1-30) associated with it</span></span>
<span id="cb86-2"><a href="predicting-course-evaluation-scores.html#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="co"># by processing the dummy variables</span></span>
<span id="cb86-3"><a href="predicting-course-evaluation-scores.html#cb86-3" aria-hidden="true" tabindex="-1"></a>dummy_var_row_sum <span class="ot">&lt;-</span> teaching_eval_focus <span class="sc">%&gt;%</span></span>
<span id="cb86-4"><a href="predicting-course-evaluation-scores.html#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(class1<span class="sc">:</span>class30) <span class="sc">%&gt;%</span> </span>
<span id="cb86-5"><a href="predicting-course-evaluation-scores.html#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowSums</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb86-6"><a href="predicting-course-evaluation-scores.html#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb86-7"><a href="predicting-course-evaluation-scores.html#cb86-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">class_indentified =</span> value) <span class="co"># not all evaluations have a class                                              # associated with them</span></span>
<span id="cb86-8"><a href="predicting-course-evaluation-scores.html#cb86-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-9"><a href="predicting-course-evaluation-scores.html#cb86-9" aria-hidden="true" tabindex="-1"></a>visdat<span class="sc">::</span><span class="fu">vis_miss</span>(dummy_var_row_sum <span class="sc">%&gt;%</span> </span>
<span id="cb86-10"><a href="predicting-course-evaluation-scores.html#cb86-10" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">na_if</span>(<span class="dv">0</span>))</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Working with the dummy variables in the analysis and modeling below would entail dropping two thirds observations and <code>n</code> = 463. So, although I recognized the course identifier dummy variables as potentially important predictors of <code>course_evaluation</code> I dropped them from the analysis, rather than loose so many observations from the dataset.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="predicting-course-evaluation-scores.html#cb87-1" aria-hidden="true" tabindex="-1"></a>teaching_eval_clean <span class="ot">&lt;-</span> teaching_eval_focus <span class="sc">%&gt;%</span> </span>
<span id="cb87-2"><a href="predicting-course-evaluation-scores.html#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">&quot;class&quot;</span>))</span>
<span id="cb87-3"><a href="predicting-course-evaluation-scores.html#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="predicting-course-evaluation-scores.html#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(teaching_eval_clean)</span></code></pre></div>
<pre><code>## Rows: 463
## Columns: 16
## $ prof_number            &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, ~
## $ course_evaluation      &lt;dbl&gt; 4.3, 4.5, 3.7, 4.3, 4.4, 4.2, 4.0, 3.4, 4.5, 3.~
## $ tenured                &lt;dbl&gt; 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1,~
## $ minority               &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0,~
## $ age                    &lt;dbl&gt; 36, 59, 51, 40, 31, 62, 33, 51, 33, 47, 35, 37,~
## $ prof_ave_rating        &lt;dbl&gt; 4.7, 4.6, 4.1, 4.5, 4.8, 4.4, 4.4, 3.4, 4.8, 4.~
## $ prof_ave_beauty_rating &lt;dbl&gt; 0.2015666, -0.8260813, -0.6603327, -0.7663125, ~
## $ female                 &lt;dbl&gt; 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0,~
## $ formal                 &lt;dbl&gt; 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,~
## $ non_native_english     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0,~
## $ tenure_track           &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1,~
## $ lower                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,~
## $ multiple_prof          &lt;dbl&gt; 1, 0, 1, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1,~
## $ one_credit             &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,~
## $ eval_response_rate     &lt;dbl&gt; 55.81395, 85.00000, 100.00000, 86.95652, 87.500~
## $ students               &lt;dbl&gt; 43, 20, 55, 46, 48, 282, 41, 41, 60, 19, 25, 34~</code></pre>
</div>
</div>
<div id="exploratory-data-analysis-2" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Exploratory data analysis</h2>
<div id="the-response-variable" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> The response variable</h3>
<p>So, I started the exploratory data analysis quickly looking at summary statistics for <code>course_evaluation</code>, which is the response variable in this exercise. This first things I noted was that the both the mean and median <code>course_evaluation</code> score is 4, and the mini-histogram indicates a potential left skew of the data. So, it appears that the <code>course_evaluation</code> scores tend to be towards the higher end of the 5 point scale. I want to look at this in a little more detail, so moved on to plotting a full histogram.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="predicting-course-evaluation-scores.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">skim_minimal</span>(<span class="at">df =</span> teaching_eval_clean, course_evaluation)</span></code></pre></div>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p50</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">course_evaluation</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">0.55</td>
<td align="right">2.1</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="left">▁▂▆▇▅</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="predicting-course-evaluation-scores.html#cb90-1" aria-hidden="true" tabindex="-1"></a>num_evals <span class="ot">&lt;-</span> <span class="fu">nrow</span>(teaching_eval_clean)</span>
<span id="cb90-2"><a href="predicting-course-evaluation-scores.html#cb90-2" aria-hidden="true" tabindex="-1"></a>num_evals_three_plus <span class="ot">&lt;-</span> <span class="fu">nrow</span>(</span>
<span id="cb90-3"><a href="predicting-course-evaluation-scores.html#cb90-3" aria-hidden="true" tabindex="-1"></a>  teaching_eval_clean[teaching_eval_clean<span class="sc">$</span>course_evaluation <span class="sc">&gt;=</span> <span class="dv">3</span>,]</span>
<span id="cb90-4"><a href="predicting-course-evaluation-scores.html#cb90-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb90-5"><a href="predicting-course-evaluation-scores.html#cb90-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-6"><a href="predicting-course-evaluation-scores.html#cb90-6" aria-hidden="true" tabindex="-1"></a>perc_evals_three_plus <span class="ot">&lt;-</span> <span class="fu">round</span>((num_evals_three_plus <span class="sc">/</span> num_evals) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">0</span>)</span>
<span id="cb90-7"><a href="predicting-course-evaluation-scores.html#cb90-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-8"><a href="predicting-course-evaluation-scores.html#cb90-8" aria-hidden="true" tabindex="-1"></a>anno_text <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;{perc_evals_three_plus}% of courses have</span></span>
<span id="cb90-9"><a href="predicting-course-evaluation-scores.html#cb90-9" aria-hidden="true" tabindex="-1"></a><span class="st">                        an average evaluation</span></span>
<span id="cb90-10"><a href="predicting-course-evaluation-scores.html#cb90-10" aria-hidden="true" tabindex="-1"></a><span class="st">                        score of 3 or above&quot;</span>)</span>
<span id="cb90-11"><a href="predicting-course-evaluation-scores.html#cb90-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-12"><a href="predicting-course-evaluation-scores.html#cb90-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-13"><a href="predicting-course-evaluation-scores.html#cb90-13" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot base</span></span>
<span id="cb90-14"><a href="predicting-course-evaluation-scores.html#cb90-14" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> teaching_eval_clean,</span>
<span id="cb90-15"><a href="predicting-course-evaluation-scores.html#cb90-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> course_evaluation)) <span class="sc">+</span></span>
<span id="cb90-16"><a href="predicting-course-evaluation-scores.html#cb90-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-17"><a href="predicting-course-evaluation-scores.html#cb90-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add a reference line</span></span>
<span id="cb90-18"><a href="predicting-course-evaluation-scores.html#cb90-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">3</span>, <span class="at">colour =</span> <span class="st">&quot;grey70&quot;</span>, <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">linetype =</span> <span class="st">&quot;longdash&quot;</span>) <span class="sc">+</span></span>
<span id="cb90-19"><a href="predicting-course-evaluation-scores.html#cb90-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">xmin =</span> <span class="dv">3</span>, <span class="at">xmax =</span> <span class="fl">5.05</span>, <span class="at">ymin =</span> <span class="dv">0</span> , <span class="at">ymax =</span> <span class="dv">40</span>, <span class="at">fill =</span> <span class="st">&quot;grey92&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb90-20"><a href="predicting-course-evaluation-scores.html#cb90-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-21"><a href="predicting-course-evaluation-scores.html#cb90-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add annotation</span></span>
<span id="cb90-22"><a href="predicting-course-evaluation-scores.html#cb90-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="at">x =</span> <span class="fl">3.2</span>, <span class="at">y =</span> <span class="dv">35</span>,</span>
<span id="cb90-23"><a href="predicting-course-evaluation-scores.html#cb90-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> anno_text, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">colour =</span> <span class="st">&quot;grey20&quot;</span>) <span class="sc">+</span></span>
<span id="cb90-24"><a href="predicting-course-evaluation-scores.html#cb90-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-25"><a href="predicting-course-evaluation-scores.html#cb90-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create histogram with minimal styling</span></span>
<span id="cb90-26"><a href="predicting-course-evaluation-scores.html#cb90-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_minimal_hist</span>(<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">40</span>),</span>
<span id="cb90-27"><a href="predicting-course-evaluation-scores.html#cb90-27" aria-hidden="true" tabindex="-1"></a>                    <span class="at">binwidth =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb90-28"><a href="predicting-course-evaluation-scores.html#cb90-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-29"><a href="predicting-course-evaluation-scores.html#cb90-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adjust x axis labels for readability</span></span>
<span id="cb90-30"><a href="predicting-course-evaluation-scores.html#cb90-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">5</span>,<span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb90-31"><a href="predicting-course-evaluation-scores.html#cb90-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_limits</span>(<span class="at">x =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb90-32"><a href="predicting-course-evaluation-scores.html#cb90-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-33"><a href="predicting-course-evaluation-scores.html#cb90-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adjust y axis labels for readability</span></span>
<span id="cb90-34"><a href="predicting-course-evaluation-scores.html#cb90-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">40</span>,<span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb90-35"><a href="predicting-course-evaluation-scores.html#cb90-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-36"><a href="predicting-course-evaluation-scores.html#cb90-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add plot labels</span></span>
<span id="cb90-37"><a href="predicting-course-evaluation-scores.html#cb90-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Course evaluation scores tend to be towards</span><span class="sc">\n</span><span class="st">the top end of the five point scale</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb90-38"><a href="predicting-course-evaluation-scores.html#cb90-38" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Average course evaluation score</span><span class="sc">\n</span><span class="st">(given by students)&quot;</span>,</span>
<span id="cb90-39"><a href="predicting-course-evaluation-scores.html#cb90-39" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Number of courses</span><span class="sc">\n</span><span class="st">&quot;</span>) </span></code></pre></div>
<p>So, it full plot there is some indication of left skew, in the form of the longer tail to the left of the plot. Also, evident is the fact there is a hard limit (of 5) on the maximum <code>course_evaluation</code> score, which accentuates the impression of the skew.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="predicting-course-evaluation-scores.html#cb91-1" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="predicting-course-evaluation-scores.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;test.svg&quot;</span>)</span></code></pre></div>
<p>So, I took a quick look at <code>course_evaluation</code> centered around the mean. This looks like a close enough approximation to the normal distribution to me. So, ahead of modeling I don’t need to think about transforming <code>course_evaluation</code> scores to address the limited amount of skew evident in the plot. However, it might be worth centering the <code>course_evaluation</code> scores as this might help make the regression coefficients easier to interpret. But I’ll come back to that later on.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="predicting-course-evaluation-scores.html#cb93-1" aria-hidden="true" tabindex="-1"></a>course_evaluation_mean <span class="ot">=</span> <span class="fu">mean</span>(teaching_eval_clean<span class="sc">$</span>course_evaluation)</span>
<span id="cb93-2"><a href="predicting-course-evaluation-scores.html#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="predicting-course-evaluation-scores.html#cb93-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> teaching_eval_clean,</span>
<span id="cb93-4"><a href="predicting-course-evaluation-scores.html#cb93-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> course_evaluation <span class="sc">-</span> course_evaluation_mean)) <span class="sc">+</span></span>
<span id="cb93-5"><a href="predicting-course-evaluation-scores.html#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_minimal_hist</span>(<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">40</span>),</span>
<span id="cb93-6"><a href="predicting-course-evaluation-scores.html#cb93-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">binwidth =</span> <span class="fl">0.1</span>)</span>
<span id="cb93-7"><a href="predicting-course-evaluation-scores.html#cb93-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-8"><a href="predicting-course-evaluation-scores.html#cb93-8" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span></span>
<span id="cb93-9"><a href="predicting-course-evaluation-scores.html#cb93-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Centering course evaluation scores makes it</span><span class="sc">\n</span><span class="st">easier to see the extent of skew</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb93-10"><a href="predicting-course-evaluation-scores.html#cb93-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Centred average course evaluation score&quot;</span>,</span>
<span id="cb93-11"><a href="predicting-course-evaluation-scores.html#cb93-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Number of courses</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="potential-explanatory-variables" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Potential explanatory variables</h3>
<p>So, I moved on to looking at the potential explanatory variables within the dataset. Remembering that when I imported the data I had thought about the potential explanatory variables as belonging to two distinct groups: (1) Professor related variables; and, (2) course related variables. So, below I take at look at these two groups of variables in turn.</p>
<div id="professor-related-explanatory-variables" class="section level4" number="4.2.2.1">
<h4><span class="header-section-number">4.2.2.1</span> Professor related explanatory variables</h4>
<p>The first thing I noticed when looking at the summary statistics for the Professor related variables was that all the variables are numeric. But that there is categorical data present which has already coded as binary variables. So, I decided to split the variables again into groups of binary variables and continuous variables, before looking at the data in more detail.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="predicting-course-evaluation-scores.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># focus on variables relating to professors</span></span>
<span id="cb94-2"><a href="predicting-course-evaluation-scores.html#cb94-2" aria-hidden="true" tabindex="-1"></a>explanatory_variables_prof <span class="ot">&lt;-</span> teaching_eval_clean <span class="sc">%&gt;%</span> </span>
<span id="cb94-3"><a href="predicting-course-evaluation-scores.html#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(prof_number, tenured<span class="sc">:</span>tenure_track)</span>
<span id="cb94-4"><a href="predicting-course-evaluation-scores.html#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="predicting-course-evaluation-scores.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="co"># produce summary statistics</span></span>
<span id="cb94-6"><a href="predicting-course-evaluation-scores.html#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="fu">skim_minimal</span>(explanatory_variables_prof <span class="sc">%&gt;%</span> </span>
<span id="cb94-7"><a href="predicting-course-evaluation-scores.html#cb94-7" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(<span class="sc">-</span>prof_number), <span class="co"># no need to include identifer variable</span></span>
<span id="cb94-8"><a href="predicting-course-evaluation-scores.html#cb94-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">show_data_completeness =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p50</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">tenured</td>
<td align="right">0.55</td>
<td align="right">0.50</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="right">1.00</td>
<td align="left">▆▁▁▁▇</td>
</tr>
<tr class="even">
<td align="left">minority</td>
<td align="right">0.14</td>
<td align="right">0.35</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">age</td>
<td align="right">48.37</td>
<td align="right">9.80</td>
<td align="right">29.00</td>
<td align="right">48.00</td>
<td align="right">73.00</td>
<td align="left">▅▆▇▆▁</td>
</tr>
<tr class="even">
<td align="left">prof_ave_rating</td>
<td align="right">4.17</td>
<td align="right">0.54</td>
<td align="right">2.30</td>
<td align="right">4.30</td>
<td align="right">5.00</td>
<td align="left">▁▁▅▇▇</td>
</tr>
<tr class="odd">
<td align="left">prof_ave_beauty_rating</td>
<td align="right">-0.09</td>
<td align="right">0.79</td>
<td align="right">-1.54</td>
<td align="right">-0.16</td>
<td align="right">1.88</td>
<td align="left">▃▇▇▃▂</td>
</tr>
<tr class="even">
<td align="left">female</td>
<td align="right">0.42</td>
<td align="right">0.49</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="left">▇▁▁▁▆</td>
</tr>
<tr class="odd">
<td align="left">formal</td>
<td align="right">0.17</td>
<td align="right">0.37</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="left">▇▁▁▁▂</td>
</tr>
<tr class="even">
<td align="left">non_native_english</td>
<td align="right">0.06</td>
<td align="right">0.24</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">tenure_track</td>
<td align="right">0.78</td>
<td align="right">0.41</td>
<td align="right">0.00</td>
<td align="right">1.00</td>
<td align="right">1.00</td>
<td align="left">▂▁▁▁▇</td>
</tr>
</tbody>
</table>
<p>To do this I wrote a quick function to identify binary variables within the dataset.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="predicting-course-evaluation-scores.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Checks if a column is a binary variable </span></span>
<span id="cb95-2"><a href="predicting-course-evaluation-scores.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; i.e. checks if a column only contains zeros and ones</span></span>
<span id="cb95-3"><a href="predicting-course-evaluation-scores.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb95-4"><a href="predicting-course-evaluation-scores.html#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param col: A column of dataframe passed by a TidyVerse function</span></span>
<span id="cb95-5"><a href="predicting-course-evaluation-scores.html#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb95-6"><a href="predicting-course-evaluation-scores.html#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return: A boolean</span></span>
<span id="cb95-7"><a href="predicting-course-evaluation-scores.html#cb95-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-8"><a href="predicting-course-evaluation-scores.html#cb95-8" aria-hidden="true" tabindex="-1"></a>is_binary_var <span class="ot">&lt;-</span> <span class="cf">function</span>(col){</span>
<span id="cb95-9"><a href="predicting-course-evaluation-scores.html#cb95-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb95-10"><a href="predicting-course-evaluation-scores.html#cb95-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># identify unique entries in column</span></span>
<span id="cb95-11"><a href="predicting-course-evaluation-scores.html#cb95-11" aria-hidden="true" tabindex="-1"></a>  u <span class="ot">&lt;-</span> col <span class="sc">%&gt;%</span> </span>
<span id="cb95-12"><a href="predicting-course-evaluation-scores.html#cb95-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unique</span>()</span>
<span id="cb95-13"><a href="predicting-course-evaluation-scores.html#cb95-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb95-14"><a href="predicting-course-evaluation-scores.html#cb95-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># check if only 0s and 1s a are within the column and return as appropriate</span></span>
<span id="cb95-15"><a href="predicting-course-evaluation-scores.html#cb95-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">identical</span>(<span class="fu">sort</span>(u), <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))) <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb95-16"><a href="predicting-course-evaluation-scores.html#cb95-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb95-17"><a href="predicting-course-evaluation-scores.html#cb95-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="continuous-variables" class="section level5" number="4.2.2.1.1">
<h5><span class="header-section-number">4.2.2.1.1</span> Continuous variables</h5>
<p>There are only three continuous variables relating to Professors:</p>
<ul>
<li><p>the average rating given by students to each Professor teaching the course (<code>prof_ave_rating</code>);</p></li>
<li><p>the average beauty rating by students to each Professor teaching the course (<code>prof_ave_beauty_rating)</code>;</p></li>
<li><p>and, <code>age</code>.</p></li>
</ul>
<p>Immediately below are the summary statistics for each of the three variables. I then take a more detailed look at each one of these variables in turn.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="predicting-course-evaluation-scores.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># identify continous variables within the dataset</span></span>
<span id="cb96-2"><a href="predicting-course-evaluation-scores.html#cb96-2" aria-hidden="true" tabindex="-1"></a>explanatory_variables_prof_cont <span class="ot">&lt;-</span> explanatory_variables_prof <span class="sc">%&gt;%</span> </span>
<span id="cb96-3"><a href="predicting-course-evaluation-scores.html#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~!</span><span class="fu">is_binary_var</span>(.))) </span>
<span id="cb96-4"><a href="predicting-course-evaluation-scores.html#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="predicting-course-evaluation-scores.html#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co"># show summary statistics</span></span>
<span id="cb96-6"><a href="predicting-course-evaluation-scores.html#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="fu">skim_minimal</span>(explanatory_variables_prof_cont <span class="sc">%&gt;%</span> </span>
<span id="cb96-7"><a href="predicting-course-evaluation-scores.html#cb96-7" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(<span class="sc">-</span>prof_number),</span>
<span id="cb96-8"><a href="predicting-course-evaluation-scores.html#cb96-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">show_data_completeness =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p50</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">age</td>
<td align="right">48.37</td>
<td align="right">9.80</td>
<td align="right">29.00</td>
<td align="right">48.00</td>
<td align="right">73.00</td>
<td align="left">▅▆▇▆▁</td>
</tr>
<tr class="even">
<td align="left">prof_ave_rating</td>
<td align="right">4.17</td>
<td align="right">0.54</td>
<td align="right">2.30</td>
<td align="right">4.30</td>
<td align="right">5.00</td>
<td align="left">▁▁▅▇▇</td>
</tr>
<tr class="odd">
<td align="left">prof_ave_beauty_rating</td>
<td align="right">-0.09</td>
<td align="right">0.79</td>
<td align="right">-1.54</td>
<td align="right">-0.16</td>
<td align="right">1.88</td>
<td align="left">▃▇▇▃▂</td>
</tr>
</tbody>
</table>
<p>At first glance the distribution of <code>prof_ave_rating</code> is very similar to the distribution of the response variable (<code>course_evaluation)</code> .</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="predicting-course-evaluation-scores.html#cb97-1" aria-hidden="true" tabindex="-1"></a>plot_title <span class="ot">&lt;-</span> <span class="st">&quot;(Similarly to course evaluation scores)</span><span class="sc">\n</span><span class="st">Professor rating tends to be towards the upper end of the five point scale</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb97-2"><a href="predicting-course-evaluation-scores.html#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="predicting-course-evaluation-scores.html#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> explanatory_variables_prof_cont,</span>
<span id="cb97-4"><a href="predicting-course-evaluation-scores.html#cb97-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> prof_ave_rating)) <span class="sc">+</span></span>
<span id="cb97-5"><a href="predicting-course-evaluation-scores.html#cb97-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_minimal_hist</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">45</span>), <span class="at">binwidth =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb97-6"><a href="predicting-course-evaluation-scores.html#cb97-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_limits</span>(<span class="at">x =</span> <span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb97-7"><a href="predicting-course-evaluation-scores.html#cb97-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb97-8"><a href="predicting-course-evaluation-scores.html#cb97-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> plot_title,</span>
<span id="cb97-9"><a href="predicting-course-evaluation-scores.html#cb97-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Professor rating&quot;</span>,</span>
<span id="cb97-10"><a href="predicting-course-evaluation-scores.html#cb97-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Number of ratings</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>The plot below compares <code>course_evaluation</code> and <code>prof_ave_rating</code> at each observation in the dataset. This shows that for a given course-professor pair the <code>prof_ave_rating</code> tends to be higher than the <code>course_evaluation</code> score.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="predicting-course-evaluation-scores.html#cb98-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> teaching_eval_clean <span class="sc">%&gt;%</span> </span>
<span id="cb98-2"><a href="predicting-course-evaluation-scores.html#cb98-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-3"><a href="predicting-course-evaluation-scores.html#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># focus on the two variables to be comparted for each observation</span></span>
<span id="cb98-4"><a href="predicting-course-evaluation-scores.html#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(course_evaluation, prof_ave_rating) <span class="sc">%&gt;%</span> </span>
<span id="cb98-5"><a href="predicting-course-evaluation-scores.html#cb98-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(prof_ave_rating) <span class="sc">%&gt;%</span> </span>
<span id="cb98-6"><a href="predicting-course-evaluation-scores.html#cb98-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-7"><a href="predicting-course-evaluation-scores.html#cb98-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># put the data in a long format for plotting</span></span>
<span id="cb98-8"><a href="predicting-course-evaluation-scores.html#cb98-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(.), <span class="at">.before =</span> course_evaluation) <span class="sc">%&gt;%</span> </span>
<span id="cb98-9"><a href="predicting-course-evaluation-scores.html#cb98-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(course_evaluation, prof_ave_rating),</span>
<span id="cb98-10"><a href="predicting-course-evaluation-scores.html#cb98-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;score_type&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;score&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb98-11"><a href="predicting-course-evaluation-scores.html#cb98-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-12"><a href="predicting-course-evaluation-scores.html#cb98-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create plot base</span></span>
<span id="cb98-13"><a href="predicting-course-evaluation-scores.html#cb98-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> score, <span class="at">y =</span> id)) <span class="sc">+</span></span>
<span id="cb98-14"><a href="predicting-course-evaluation-scores.html#cb98-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-15"><a href="predicting-course-evaluation-scores.html#cb98-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add points for prof rating and course evaluation</span></span>
<span id="cb98-16"><a href="predicting-course-evaluation-scores.html#cb98-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and connect each pair of points with a line</span></span>
<span id="cb98-17"><a href="predicting-course-evaluation-scores.html#cb98-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> id), <span class="at">colour =</span> <span class="st">&quot;grey50&quot;</span>) <span class="sc">+</span></span>
<span id="cb98-18"><a href="predicting-course-evaluation-scores.html#cb98-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> score_type)) <span class="sc">+</span> </span>
<span id="cb98-19"><a href="predicting-course-evaluation-scores.html#cb98-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-20"><a href="predicting-course-evaluation-scores.html#cb98-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># show full x axis</span></span>
<span id="cb98-21"><a href="predicting-course-evaluation-scores.html#cb98-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_limits</span>(<span class="at">x =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb98-22"><a href="predicting-course-evaluation-scores.html#cb98-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove gap between x axis and plot</span></span>
<span id="cb98-23"><a href="predicting-course-evaluation-scores.html#cb98-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">nrow</span>(teaching_eval_clean)<span class="sc">+</span><span class="dv">5</span>),</span>
<span id="cb98-24"><a href="predicting-course-evaluation-scores.html#cb98-24" aria-hidden="true" tabindex="-1"></a>                  <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">5.1</span>),</span>
<span id="cb98-25"><a href="predicting-course-evaluation-scores.html#cb98-25" aria-hidden="true" tabindex="-1"></a>                  <span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb98-26"><a href="predicting-course-evaluation-scores.html#cb98-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-27"><a href="predicting-course-evaluation-scores.html#cb98-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add plot labels</span></span>
<span id="cb98-28"><a href="predicting-course-evaluation-scores.html#cb98-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;But Professor ratings tend to be higher than course evaluation scores&quot;</span>,</span>
<span id="cb98-29"><a href="predicting-course-evaluation-scores.html#cb98-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Both are on the same five point scale</span><span class="sc">\n</span><span class="st">&quot;</span>) <span class="sc">+</span> </span>
<span id="cb98-30"><a href="predicting-course-evaluation-scores.html#cb98-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-31"><a href="predicting-course-evaluation-scores.html#cb98-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># format legend to remove clutter</span></span>
<span id="cb98-32"><a href="predicting-course-evaluation-scores.html#cb98-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Set1&quot;</span>,</span>
<span id="cb98-33"><a href="predicting-course-evaluation-scores.html#cb98-33" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Course evaluation score&quot;</span>,</span>
<span id="cb98-34"><a href="predicting-course-evaluation-scores.html#cb98-34" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&quot;Professor rating&quot;</span>)) <span class="sc">+</span></span>
<span id="cb98-35"><a href="predicting-course-evaluation-scores.html#cb98-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="cn">NULL</span>)) <span class="sc">+</span></span>
<span id="cb98-36"><a href="predicting-course-evaluation-scores.html#cb98-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb98-37"><a href="predicting-course-evaluation-scores.html#cb98-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adjust theme to remove clutter</span></span>
<span id="cb98-38"><a href="predicting-course-evaluation-scores.html#cb98-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_all_grid_lines</span>() <span class="sc">+</span></span>
<span id="cb98-39"><a href="predicting-course-evaluation-scores.html#cb98-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y  =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb98-40"><a href="predicting-course-evaluation-scores.html#cb98-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb98-41"><a href="predicting-course-evaluation-scores.html#cb98-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb98-42"><a href="predicting-course-evaluation-scores.html#cb98-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb98-43"><a href="predicting-course-evaluation-scores.html#cb98-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>))</span>
<span id="cb98-44"><a href="predicting-course-evaluation-scores.html#cb98-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-45"><a href="predicting-course-evaluation-scores.html#cb98-45" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="predicting-course-evaluation-scores.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;test1.svg&quot;</span>)</span></code></pre></div>
<p>Professors can appear multiple times in the dataset, where they have been involved in teaching multiple courses. The <code>prof_ave_rating</code> is the average of the ratings given by students to the professor for an individual course. The plot below shows the <code>prof_ave_rating</code>s for 10 randomly selected professors. So, highlighting that as expected there is some variability in the average ratings that professors received from course to course.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="predicting-course-evaluation-scores.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ensure the sample random sample of professors is take when notebook is rerun</span></span>
<span id="cb100-2"><a href="predicting-course-evaluation-scores.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb100-3"><a href="predicting-course-evaluation-scores.html#cb100-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-4"><a href="predicting-course-evaluation-scores.html#cb100-4" aria-hidden="true" tabindex="-1"></a>explanatory_variables_prof_cont <span class="sc">%&gt;%</span> </span>
<span id="cb100-5"><a href="predicting-course-evaluation-scores.html#cb100-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-6"><a href="predicting-course-evaluation-scores.html#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select a random sample of professors</span></span>
<span id="cb100-7"><a href="predicting-course-evaluation-scores.html#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(prof_number) <span class="sc">%&gt;%</span></span>
<span id="cb100-8"><a href="predicting-course-evaluation-scores.html#cb100-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb100-9"><a href="predicting-course-evaluation-scores.html#cb100-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb100-10"><a href="predicting-course-evaluation-scores.html#cb100-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb100-11"><a href="predicting-course-evaluation-scores.html#cb100-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prof_number =</span> <span class="fu">factor</span>(prof_number)) <span class="sc">%&gt;%</span> <span class="co"># convert to factor </span></span>
<span id="cb100-12"><a href="predicting-course-evaluation-scores.html#cb100-12" aria-hidden="true" tabindex="-1"></a>                                                <span class="co"># to simplify plotting</span></span>
<span id="cb100-13"><a href="predicting-course-evaluation-scores.html#cb100-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb100-14"><a href="predicting-course-evaluation-scores.html#cb100-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-15"><a href="predicting-course-evaluation-scores.html#cb100-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># produce plot</span></span>
<span id="cb100-16"><a href="predicting-course-evaluation-scores.html#cb100-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(prof_ave_rating, prof_number)) <span class="sc">+</span></span>
<span id="cb100-17"><a href="predicting-course-evaluation-scores.html#cb100-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-18"><a href="predicting-course-evaluation-scores.html#cb100-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># jitter slightly to make overlapping points easier to see</span></span>
<span id="cb100-19"><a href="predicting-course-evaluation-scores.html#cb100-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">height =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb100-20"><a href="predicting-course-evaluation-scores.html#cb100-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-21"><a href="predicting-course-evaluation-scores.html#cb100-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adjust axis for readibility</span></span>
<span id="cb100-22"><a href="predicting-course-evaluation-scores.html#cb100-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand_limits</span>(<span class="at">x =</span> <span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb100-23"><a href="predicting-course-evaluation-scores.html#cb100-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb100-24"><a href="predicting-course-evaluation-scores.html#cb100-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-25"><a href="predicting-course-evaluation-scores.html#cb100-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add plot labels</span></span>
<span id="cb100-26"><a href="predicting-course-evaluation-scores.html#cb100-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Professor identification number&quot;</span>,</span>
<span id="cb100-27"><a href="predicting-course-evaluation-scores.html#cb100-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Course evaluation score&quot;</span>,</span>
<span id="cb100-28"><a href="predicting-course-evaluation-scores.html#cb100-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;There is some variablility in the evaluation scores professors</span><span class="sc">\n</span><span class="st"> received from course to course&quot;</span>,</span>
<span id="cb100-29"><a href="predicting-course-evaluation-scores.html#cb100-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Showing course evaulation scores for 10 randomly selected professors&quot;</span>)</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>So, averaging ratings for a given professor over multiple courses might give an idea of the quality of teaching delivered in general by a given professor. I’ll call this mean of average ratings over multiple course <code>ave_teaching_qual</code> just to avoid confusing terminology created with the multiple levels of averaging taking place. I’ll return to this estimate of teaching quality delivered by each professor later on, as it may be a potentially useful predictor of a <code>course_evaluation</code> score.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="predicting-course-evaluation-scores.html#cb101-1" aria-hidden="true" tabindex="-1"></a>prof_ave_teach_qual <span class="ot">&lt;-</span> explanatory_variables_prof_cont <span class="sc">%&gt;%</span> </span>
<span id="cb101-2"><a href="predicting-course-evaluation-scores.html#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(prof_number) <span class="sc">%&gt;%</span></span>
<span id="cb101-3"><a href="predicting-course-evaluation-scores.html#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">ave_teaching_qual =</span> <span class="fu">mean</span>(prof_ave_rating))</span>
<span id="cb101-4"><a href="predicting-course-evaluation-scores.html#cb101-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-5"><a href="predicting-course-evaluation-scores.html#cb101-5" aria-hidden="true" tabindex="-1"></a>explanatory_variables_prof_cont <span class="ot">&lt;-</span> explanatory_variables_prof_cont <span class="sc">%&gt;%</span> </span>
<span id="cb101-6"><a href="predicting-course-evaluation-scores.html#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(prof_ave_teach_qual)</span></code></pre></div>
<p>Moving on to the next professor related continuous variable the <code>prof_ave_beauty_rating</code>. There is a single beauty rating for each professor. I confirmed this in the code below by confirming the standard deviation of each Professor’s <code>prof_ave_beauty_rating</code> is zero.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="predicting-course-evaluation-scores.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check if the beauty of professors has been rated seperately for each course</span></span>
<span id="cb102-2"><a href="predicting-course-evaluation-scores.html#cb102-2" aria-hidden="true" tabindex="-1"></a>explanatory_variables_prof_cont <span class="sc">%&gt;%</span> </span>
<span id="cb102-3"><a href="predicting-course-evaluation-scores.html#cb102-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-4"><a href="predicting-course-evaluation-scores.html#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(prof_number) <span class="sc">%&gt;%</span> </span>
<span id="cb102-5"><a href="predicting-course-evaluation-scores.html#cb102-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">beauty_rating_sd =</span> <span class="fu">sd</span>(prof_ave_beauty_rating)) <span class="sc">%&gt;%</span> </span>
<span id="cb102-6"><a href="predicting-course-evaluation-scores.html#cb102-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-7"><a href="predicting-course-evaluation-scores.html#cb102-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># I am not sure why NAs are being produced here</span></span>
<span id="cb102-8"><a href="predicting-course-evaluation-scores.html#cb102-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># I checked the dataframe manually and they look like they relate to empty rows </span></span>
<span id="cb102-9"><a href="predicting-course-evaluation-scores.html#cb102-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># at the end of the dataframe. After a quick Google I could find an obvious</span></span>
<span id="cb102-10"><a href="predicting-course-evaluation-scores.html#cb102-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reason for these empty rows, so I decided to leave this issues for now.</span></span>
<span id="cb102-11"><a href="predicting-course-evaluation-scores.html#cb102-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(beauty_rating_sd)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 1
##   beauty_rating_sd
##              &lt;dbl&gt;
## 1                0
## 2               NA</code></pre>
<p>Looking at the <code>prof_ave_beauty_rating</code>s in the plot below, it looks like again the rating were on five point scale and have already been centered. I am going to assume zero corresponds to average beauty on a Likhert scale (very unattractive, unattractive, average attractiveness, attractive, very attractive). Then it looks like there may be some tendency for students to rate their Professors as being unattractive or around average. Remembering that the ratings plotted below are averages and assuming that students were not asked to rate attractiveness on a more granular scale, where ratings of for example -0.1 could be given. A Likhert scale seems much more likely.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="predicting-course-evaluation-scores.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(explanatory_variables_prof_cont,</span>
<span id="cb104-2"><a href="predicting-course-evaluation-scores.html#cb104-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(prof_ave_beauty_rating)) <span class="sc">+</span></span>
<span id="cb104-3"><a href="predicting-course-evaluation-scores.html#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_minimal_hist</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">70</span>), <span class="at">binwidth =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb104-4"><a href="predicting-course-evaluation-scores.html#cb104-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb104-5"><a href="predicting-course-evaluation-scores.html#cb104-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Do students tend to rate Professor as average</span><span class="sc">\n</span><span class="st">or below average attactiveness?&quot;</span>,</span>
<span id="cb104-6"><a href="predicting-course-evaluation-scores.html#cb104-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Average beauty rating&quot;</span>,</span>
<span id="cb104-7"><a href="predicting-course-evaluation-scores.html#cb104-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Number of professors</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Finally, for the Professor related continuous variables I plot the distribution of <code>age</code>. There is too much too note here. Other than the shape of the histogram is rather sensitive to the width of the bins.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="predicting-course-evaluation-scores.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(explanatory_variables_prof_cont,</span>
<span id="cb105-2"><a href="predicting-course-evaluation-scores.html#cb105-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb105-3"><a href="predicting-course-evaluation-scores.html#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_minimal_hist</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">110</span>), <span class="at">binwidth =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb105-4"><a href="predicting-course-evaluation-scores.html#cb105-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb105-5"><a href="predicting-course-evaluation-scores.html#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;The distribution of the ages of Professors begins to approximate</span><span class="sc">\n</span><span class="st"> the normal distriubtion with an appropriate binwidth&quot;</span>)</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>This made wonder if it might be helpful during the modelling to have a binned (i.e. discretised) age variable which groups professors by age.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="predicting-course-evaluation-scores.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create discrete age variable (5 year age groups starting at age 20)</span></span>
<span id="cb106-2"><a href="predicting-course-evaluation-scores.html#cb106-2" aria-hidden="true" tabindex="-1"></a>explanatory_variables_prof_cont <span class="ot">&lt;-</span> explanatory_variables_prof_cont <span class="sc">%&gt;%</span> </span>
<span id="cb106-3"><a href="predicting-course-evaluation-scores.html#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_binned =</span> <span class="fu">cut_width</span>(age, <span class="at">width =</span> <span class="dv">5</span>, <span class="at">boundary =</span> <span class="dv">20</span>))</span></code></pre></div>
</div>
<div id="discrete-variables" class="section level5" number="4.2.2.1.2">
<h5><span class="header-section-number">4.2.2.1.2</span> Discrete variables</h5>
<p>Moving on to look at the discrete (primarily binary) Professor related variables. I start by looking at the summary statistics. There is not too much to do in terms of visualisation of these variables at this point.</p>
<p>For the binary variables the mean value (shown in the summary stats below) indicates the proportion of professors with the characteristic associated with the variable (e.g. The proportion of professors who are <code>tenured</code> is 0.546). So, we can see that binary variables differ in the extent to which they partition the professors in to groups of equal or unequal size.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="predicting-course-evaluation-scores.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># identify binary variables within the dataset</span></span>
<span id="cb107-2"><a href="predicting-course-evaluation-scores.html#cb107-2" aria-hidden="true" tabindex="-1"></a>explanatory_variables_prof_discrete <span class="ot">&lt;-</span> explanatory_variables_prof <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="predicting-course-evaluation-scores.html#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span><span class="fu">is_binary_var</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb107-4"><a href="predicting-course-evaluation-scores.html#cb107-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb107-5"><a href="predicting-course-evaluation-scores.html#cb107-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add back in identifer variable and reorder for readability</span></span>
<span id="cb107-6"><a href="predicting-course-evaluation-scores.html#cb107-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">select</span>(explanatory_variables_prof, prof_number)) <span class="sc">%&gt;%</span> </span>
<span id="cb107-7"><a href="predicting-course-evaluation-scores.html#cb107-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(prof_number, <span class="at">.before =</span> tenured) <span class="sc">%&gt;%</span> </span>
<span id="cb107-8"><a href="predicting-course-evaluation-scores.html#cb107-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb107-9"><a href="predicting-course-evaluation-scores.html#cb107-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add in age group variable group</span></span>
<span id="cb107-10"><a href="predicting-course-evaluation-scores.html#cb107-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">select</span>(explanatory_variables_prof_cont, age_binned))</span>
<span id="cb107-11"><a href="predicting-course-evaluation-scores.html#cb107-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-12"><a href="predicting-course-evaluation-scores.html#cb107-12" aria-hidden="true" tabindex="-1"></a><span class="co"># show summary statistics</span></span>
<span id="cb107-13"><a href="predicting-course-evaluation-scores.html#cb107-13" aria-hidden="true" tabindex="-1"></a><span class="fu">skim_minimal</span>(explanatory_variables_prof_discrete <span class="sc">%&gt;%</span> </span>
<span id="cb107-14"><a href="predicting-course-evaluation-scores.html#cb107-14" aria-hidden="true" tabindex="-1"></a>              <span class="fu">select</span>(<span class="sc">-</span>prof_number), </span>
<span id="cb107-15"><a href="predicting-course-evaluation-scores.html#cb107-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">show_data_completeness =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><strong>Variable type: factor</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">age_binned</td>
<td align="left">FALSE</td>
<td align="right">10</td>
<td align="left">(45: 84, (50: 74, (55: 71, (30: 63</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p50</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">tenured</td>
<td align="right">0.55</td>
<td align="right">0.50</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">▆▁▁▁▇</td>
</tr>
<tr class="even">
<td align="left">minority</td>
<td align="right">0.14</td>
<td align="right">0.35</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">female</td>
<td align="right">0.42</td>
<td align="right">0.49</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">▇▁▁▁▆</td>
</tr>
<tr class="even">
<td align="left">formal</td>
<td align="right">0.17</td>
<td align="right">0.37</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">▇▁▁▁▂</td>
</tr>
<tr class="odd">
<td align="left">non_native_english</td>
<td align="right">0.06</td>
<td align="right">0.24</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">tenure_track</td>
<td align="right">0.78</td>
<td align="right">0.41</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">▂▁▁▁▇</td>
</tr>
</tbody>
</table>
<p>Looking at the binary variables we might expect to some interactions between. For example, I wonder if a larger proportion of professors will be <code>tenured</code> if they are not <code>female</code>, and below I do a quick bit of exploratory inference to see if I am correct.</p>
<p>So, H<sub>0</sub> is that there is no difference in the proportions of female and male professor who are <code>tenured</code>. And, H<sub>A</sub> is that there is a difference between the proportions of female and male professor who are <code>tenured</code>. Below I use the <code>infer</code> package to test H<sub>0</sub> (assuming a significance level of 0.05)</p>
<ul>
<li><p>First, calculating the observed difference in proportions;</p></li>
<li><p>Then, generating the null distribution (i.e. the distribution of differences we could expect from a large number of samples collected using the same methods as the observed sample) using bootstrap resampling.</p></li>
<li><p>Finally, comparing the observed difference in proportion with the null distribution. We can see on the plot that H<sub>0</sub> can be rejected and the p-value of observed difference (approx. equal to 0) confirms this. So, in the population of Professors from which the current observations were sampled from we can be 95% confident that there is a difference between the proportions of female and male professor who are <code>tenured</code>. And, given the observed difference in proportions 0.27 (male - female) we would expect more male than female professors to be <code>tenured</code>.</p></li>
</ul>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="predicting-course-evaluation-scores.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculating the observed difference in proportion of men and women</span></span>
<span id="cb108-2"><a href="predicting-course-evaluation-scores.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="co"># with tenure</span></span>
<span id="cb108-3"><a href="predicting-course-evaluation-scores.html#cb108-3" aria-hidden="true" tabindex="-1"></a>diff_tenured <span class="ot">&lt;-</span> explanatory_variables_prof_discrete <span class="sc">%&gt;%</span></span>
<span id="cb108-4"><a href="predicting-course-evaluation-scores.html#cb108-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb108-5"><a href="predicting-course-evaluation-scores.html#cb108-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the test requires catergorical data to be coded as a factor</span></span>
<span id="cb108-6"><a href="predicting-course-evaluation-scores.html#cb108-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tenured =</span> <span class="fu">factor</span>(tenured),</span>
<span id="cb108-7"><a href="predicting-course-evaluation-scores.html#cb108-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">female =</span> <span class="fu">factor</span>(female)) <span class="sc">%&gt;%</span> </span>
<span id="cb108-8"><a href="predicting-course-evaluation-scores.html#cb108-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb108-9"><a href="predicting-course-evaluation-scores.html#cb108-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">specify</span>(tenured <span class="sc">~</span> female, <span class="at">success =</span> <span class="st">&quot;1&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb108-10"><a href="predicting-course-evaluation-scores.html#cb108-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">calculate</span>(<span class="at">stat =</span> <span class="st">&quot;diff in props&quot;</span>)</span>
<span id="cb108-11"><a href="predicting-course-evaluation-scores.html#cb108-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-12"><a href="predicting-course-evaluation-scores.html#cb108-12" aria-hidden="true" tabindex="-1"></a><span class="co"># A postive difference indicates higher proportion of men tenured</span></span>
<span id="cb108-13"><a href="predicting-course-evaluation-scores.html#cb108-13" aria-hidden="true" tabindex="-1"></a>diff_tenured</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##    stat
##   &lt;dbl&gt;
## 1 0.271</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="predicting-course-evaluation-scores.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate the null distribution</span></span>
<span id="cb110-2"><a href="predicting-course-evaluation-scores.html#cb110-2" aria-hidden="true" tabindex="-1"></a>null_distn <span class="ot">&lt;-</span> explanatory_variables_prof_discrete <span class="sc">%&gt;%</span></span>
<span id="cb110-3"><a href="predicting-course-evaluation-scores.html#cb110-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb110-4"><a href="predicting-course-evaluation-scores.html#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the test requires catergorical data to be coded as a factor</span></span>
<span id="cb110-5"><a href="predicting-course-evaluation-scores.html#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tenured =</span> <span class="fu">factor</span>(tenured),</span>
<span id="cb110-6"><a href="predicting-course-evaluation-scores.html#cb110-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">female =</span> <span class="fu">factor</span>(female)) <span class="sc">%&gt;%</span></span>
<span id="cb110-7"><a href="predicting-course-evaluation-scores.html#cb110-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb110-8"><a href="predicting-course-evaluation-scores.html#cb110-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">specify</span>(tenured <span class="sc">~</span> female, <span class="at">success =</span> <span class="st">&quot;1&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb110-9"><a href="predicting-course-evaluation-scores.html#cb110-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hypothesize</span>(<span class="at">null =</span> <span class="st">&quot;independence&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb110-10"><a href="predicting-course-evaluation-scores.html#cb110-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate</span>(<span class="at">reps =</span> <span class="dv">1000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb110-11"><a href="predicting-course-evaluation-scores.html#cb110-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">calculate</span>(<span class="at">stat =</span> <span class="st">&quot;diff in props&quot;</span>)</span>
<span id="cb110-12"><a href="predicting-course-evaluation-scores.html#cb110-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-13"><a href="predicting-course-evaluation-scores.html#cb110-13" aria-hidden="true" tabindex="-1"></a><span class="co"># visualise distribution under null hypothesis</span></span>
<span id="cb110-14"><a href="predicting-course-evaluation-scores.html#cb110-14" aria-hidden="true" tabindex="-1"></a><span class="fu">visualize</span>(null_distn) <span class="sc">+</span></span>
<span id="cb110-15"><a href="predicting-course-evaluation-scores.html#cb110-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">shade_p_value</span>(<span class="at">obs_stat =</span> diff_tenured, <span class="at">direction =</span> <span class="st">&quot;two-sided&quot;</span>) <span class="sc">+</span></span>
<span id="cb110-16"><a href="predicting-course-evaluation-scores.html#cb110-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb110-17"><a href="predicting-course-evaluation-scores.html#cb110-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_all_grid_lines</span>()</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="predicting-course-evaluation-scores.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># confirm p-value</span></span>
<span id="cb111-2"><a href="predicting-course-evaluation-scores.html#cb111-2" aria-hidden="true" tabindex="-1"></a>null_distn <span class="sc">%&gt;%</span></span>
<span id="cb111-3"><a href="predicting-course-evaluation-scores.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_p_value</span>(<span class="at">obs_stat =</span> diff_tenured, <span class="at">direction =</span> <span class="st">&quot;two-sided&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   p_value
##     &lt;dbl&gt;
## 1       0</code></pre>
<p>I think I’ll leave that there in terms of exploratory inference, and just assume for that there interactions between the discrete variables and come back to that issue if and when required in the modeling process.</p>
</div>
</div>
<div id="course-related-explanatory-variables" class="section level4" number="4.2.2.2">
<h4><span class="header-section-number">4.2.2.2</span> Course related explanatory variables</h4>
<p>Having focused on the professor related variables above, I now move on to exploring the course related variables. Similarly to the professor related variables, there are a mix of continuous and binary course related variables. So, below I look at each of two groups of variables separately.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="predicting-course-evaluation-scores.html#cb113-1" aria-hidden="true" tabindex="-1"></a>explanatory_variables_course <span class="ot">&lt;-</span> teaching_eval_clean <span class="sc">%&gt;%</span> </span>
<span id="cb113-2"><a href="predicting-course-evaluation-scores.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(lower<span class="sc">:</span>students)</span>
<span id="cb113-3"><a href="predicting-course-evaluation-scores.html#cb113-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-4"><a href="predicting-course-evaluation-scores.html#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="fu">skim_minimal</span>(explanatory_variables_course, <span class="at">show_data_completeness =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p50</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">lower</td>
<td align="right">0.34</td>
<td align="right">0.47</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="left">▇▁▁▁▅</td>
</tr>
<tr class="even">
<td align="left">multiple_prof</td>
<td align="right">0.34</td>
<td align="right">0.47</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="left">▇▁▁▁▅</td>
</tr>
<tr class="odd">
<td align="left">one_credit</td>
<td align="right">0.06</td>
<td align="right">0.23</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">1</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">eval_response_rate</td>
<td align="right">74.43</td>
<td align="right">16.76</td>
<td align="right">10.42</td>
<td align="right">76.92</td>
<td align="right">100</td>
<td align="left">▁▂▅▇▇</td>
</tr>
<tr class="odd">
<td align="left">students</td>
<td align="right">55.18</td>
<td align="right">75.07</td>
<td align="right">8.00</td>
<td align="right">29.00</td>
<td align="right">581</td>
<td align="left">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
<div id="continuous-variables-1" class="section level5" number="4.2.2.2.1">
<h5><span class="header-section-number">4.2.2.2.1</span> Continuous variables</h5>
<p>Below I show the summary statistics below for the two continuous variables: the evaluation response rate (<code>eval_response_rate</code>) and the number of students taking the course (<code>students</code>). A quick look suggests that both the variables are heavily skewed. So, I’ll look at each in a bit more details below.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="predicting-course-evaluation-scores.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># identify continuous variables within the dataset</span></span>
<span id="cb114-2"><a href="predicting-course-evaluation-scores.html#cb114-2" aria-hidden="true" tabindex="-1"></a>explanatory_variables_course_cont <span class="ot">&lt;-</span> explanatory_variables_course <span class="sc">%&gt;%</span> </span>
<span id="cb114-3"><a href="predicting-course-evaluation-scores.html#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~!</span><span class="fu">is_binary_var</span>(.)))</span>
<span id="cb114-4"><a href="predicting-course-evaluation-scores.html#cb114-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-5"><a href="predicting-course-evaluation-scores.html#cb114-5" aria-hidden="true" tabindex="-1"></a>explanatory_variables_course_cont <span class="sc">%&gt;%</span> </span>
<span id="cb114-6"><a href="predicting-course-evaluation-scores.html#cb114-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_minimal</span>(<span class="at">show_data_completeness =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p50</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">eval_response_rate</td>
<td align="right">74.43</td>
<td align="right">16.76</td>
<td align="right">10.42</td>
<td align="right">76.92</td>
<td align="right">100</td>
<td align="left">▁▂▅▇▇</td>
</tr>
<tr class="even">
<td align="left">students</td>
<td align="right">55.18</td>
<td align="right">75.07</td>
<td align="right">8.00</td>
<td align="right">29.00</td>
<td align="right">581</td>
<td align="left">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
<p><strong>Evaluation response rate:</strong> The histogram below shows that the distribution for <code>eval_response_rate</code> is left skewed, with the number of courses (i.e. frequency) increasing with increasing <code>eval_response_rate</code> up until around 80% response rate. Above 80% there is some evidence of a decline in the number of course with a given response rate. This makes sense as it would be challenging to get all the students of a given course to participate in an evaluation survey.</p>
<p>At the moment I am not sure if it will be beneficial to transform this variable ahead of modeling. As rather than approximating a normal distribution, it is also straightforward to interpret the distribution as composed of a linear trend between 0 and 80%. And, of course the choice of bin width of the histogram plays a key role in visual appearance of distribution. Again I’ll come back this later during the modelling if needed.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="predicting-course-evaluation-scores.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot base</span></span>
<span id="cb115-2"><a href="predicting-course-evaluation-scores.html#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(explanatory_variables_course_cont,</span>
<span id="cb115-3"><a href="predicting-course-evaluation-scores.html#cb115-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(eval_response_rate)) <span class="sc">+</span></span>
<span id="cb115-4"><a href="predicting-course-evaluation-scores.html#cb115-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb115-5"><a href="predicting-course-evaluation-scores.html#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add the plot itself</span></span>
<span id="cb115-6"><a href="predicting-course-evaluation-scores.html#cb115-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_minimal_hist</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">40</span>), <span class="at">binwidth =</span> <span class="fl">2.5</span>) <span class="sc">+</span></span>
<span id="cb115-7"><a href="predicting-course-evaluation-scores.html#cb115-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb115-8"><a href="predicting-course-evaluation-scores.html#cb115-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adjust scales to make them easier to interpret</span></span>
<span id="cb115-9"><a href="predicting-course-evaluation-scores.html#cb115-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(<span class="at">scale =</span> <span class="dv">1</span>),</span>
<span id="cb115-10"><a href="predicting-course-evaluation-scores.html#cb115-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">20</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">80</span>,<span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb115-11"><a href="predicting-course-evaluation-scores.html#cb115-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb115-12"><a href="predicting-course-evaluation-scores.html#cb115-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add more readible axis titles and a plot title</span></span>
<span id="cb115-13"><a href="predicting-course-evaluation-scores.html#cb115-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Students participating in the course evaluation survey&quot;</span>,</span>
<span id="cb115-14"><a href="predicting-course-evaluation-scores.html#cb115-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Number of courses&quot;</span>,</span>
<span id="cb115-15"><a href="predicting-course-evaluation-scores.html#cb115-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Higher participation rates in course evaluation surveys</span><span class="sc">\n</span><span class="st">are more common than lower participation rates</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p><strong>Number of students:</strong> Moving on to look at the last course related continuous variable, below is the code to contruct the plots.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="predicting-course-evaluation-scores.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co">#*************************************************************************</span></span>
<span id="cb116-2"><a href="predicting-course-evaluation-scores.html#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Untransformed data</span></span>
<span id="cb116-3"><a href="predicting-course-evaluation-scores.html#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="co">#*************************************************************************</span></span>
<span id="cb116-4"><a href="predicting-course-evaluation-scores.html#cb116-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-5"><a href="predicting-course-evaluation-scores.html#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot base</span></span>
<span id="cb116-6"><a href="predicting-course-evaluation-scores.html#cb116-6" aria-hidden="true" tabindex="-1"></a>p_num_stud_1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(explanatory_variables_course_cont,</span>
<span id="cb116-7"><a href="predicting-course-evaluation-scores.html#cb116-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(students)) <span class="sc">+</span></span>
<span id="cb116-8"><a href="predicting-course-evaluation-scores.html#cb116-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb116-9"><a href="predicting-course-evaluation-scores.html#cb116-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add reference line</span></span>
<span id="cb116-10"><a href="predicting-course-evaluation-scores.html#cb116-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">100</span>, <span class="at">colour =</span> <span class="st">&quot;grey90&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb116-11"><a href="predicting-course-evaluation-scores.html#cb116-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb116-12"><a href="predicting-course-evaluation-scores.html#cb116-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add the plot itself</span></span>
<span id="cb116-13"><a href="predicting-course-evaluation-scores.html#cb116-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_minimal_hist</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">140</span>), <span class="at">binwidth =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb116-14"><a href="predicting-course-evaluation-scores.html#cb116-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb116-15"><a href="predicting-course-evaluation-scores.html#cb116-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adjust scales to make the plot easier to interpret</span></span>
<span id="cb116-16"><a href="predicting-course-evaluation-scores.html#cb116-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">140</span>,<span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb116-17"><a href="predicting-course-evaluation-scores.html#cb116-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb116-18"><a href="predicting-course-evaluation-scores.html#cb116-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add more readible axis titles and a plot title</span></span>
<span id="cb116-19"><a href="predicting-course-evaluation-scores.html#cb116-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Number of students registered on a course&quot;</span>,</span>
<span id="cb116-20"><a href="predicting-course-evaluation-scores.html#cb116-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Number of courses</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb116-21"><a href="predicting-course-evaluation-scores.html#cb116-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Most courses have 100 students or less</span><span class="sc">\n</span><span class="st"> but there are courses with much larger numbers of students</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb116-22"><a href="predicting-course-evaluation-scores.html#cb116-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-23"><a href="predicting-course-evaluation-scores.html#cb116-23" aria-hidden="true" tabindex="-1"></a><span class="co">#*************************************************************************</span></span>
<span id="cb116-24"><a href="predicting-course-evaluation-scores.html#cb116-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformed data</span></span>
<span id="cb116-25"><a href="predicting-course-evaluation-scores.html#cb116-25" aria-hidden="true" tabindex="-1"></a><span class="co">#*************************************************************************</span></span>
<span id="cb116-26"><a href="predicting-course-evaluation-scores.html#cb116-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-27"><a href="predicting-course-evaluation-scores.html#cb116-27" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot base</span></span>
<span id="cb116-28"><a href="predicting-course-evaluation-scores.html#cb116-28" aria-hidden="true" tabindex="-1"></a>p_num_stud_2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(explanatory_variables_course_cont,</span>
<span id="cb116-29"><a href="predicting-course-evaluation-scores.html#cb116-29" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(students)) <span class="sc">+</span></span>
<span id="cb116-30"><a href="predicting-course-evaluation-scores.html#cb116-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb116-31"><a href="predicting-course-evaluation-scores.html#cb116-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add reference line</span></span>
<span id="cb116-32"><a href="predicting-course-evaluation-scores.html#cb116-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">100</span>, <span class="at">colour =</span> <span class="st">&quot;grey90&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb116-33"><a href="predicting-course-evaluation-scores.html#cb116-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb116-34"><a href="predicting-course-evaluation-scores.html#cb116-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add the plot itself</span></span>
<span id="cb116-35"><a href="predicting-course-evaluation-scores.html#cb116-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">colour =</span> <span class="st">&quot;grey70&quot;</span>) <span class="sc">+</span></span>
<span id="cb116-36"><a href="predicting-course-evaluation-scores.html#cb116-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb116-37"><a href="predicting-course-evaluation-scores.html#cb116-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb116-38"><a href="predicting-course-evaluation-scores.html#cb116-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_all_grid_lines</span>() <span class="sc">+</span></span>
<span id="cb116-39"><a href="predicting-course-evaluation-scores.html#cb116-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Number of students registered on a course</span><span class="sc">\n</span><span class="st">(plotted on a log scale)&quot;</span>,</span>
<span id="cb116-40"><a href="predicting-course-evaluation-scores.html#cb116-40" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Estimated density</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb116-41"><a href="predicting-course-evaluation-scores.html#cb116-41" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;The distribution of number of students registered per course</span><span class="sc">\n</span><span class="st">remains left skewed after a log transformation </span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p>The first plot shows that most courses have less than 100 students. There some course with several hundred students, I assume these outliers are first year courses which are mandatory for students taking a given degree. The distribution of the number of students registered per course is heavily left skewed, and after a log transformation some (albeit less) left skew remains. So, when it comes to pre-processing the data ahead of modeling I might take a look at other transformations, which could bring the distribution closer to approximating the normal distribution.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="predicting-course-evaluation-scores.html#cb117-1" aria-hidden="true" tabindex="-1"></a>p_num_stud_1</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="predicting-course-evaluation-scores.html#cb118-1" aria-hidden="true" tabindex="-1"></a>p_num_stud_2</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-31-2.png" width="672" /></p>
</div>
<div id="discrete-variables-1" class="section level5" number="4.2.2.2.2">
<h5><span class="header-section-number">4.2.2.2.2</span> Discrete variables</h5>
<p>The final variables to look at in isolation are the binary variables related to the courses themselves. The summary statistics below shows that approximately 5% of courses are <code>one_credit</code>, so I think it is unlikely to be a particularly important predictor of <code>course_evaluation</code> scores and I drop it from from the analysis going forward. I am happy to keep the other two binary variables in the analysis for now without looking at them in further detail at this stage.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="predicting-course-evaluation-scores.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># identify continuous variables within the dataset</span></span>
<span id="cb119-2"><a href="predicting-course-evaluation-scores.html#cb119-2" aria-hidden="true" tabindex="-1"></a>explanatory_variables_course_discrete <span class="ot">&lt;-</span> explanatory_variables_course <span class="sc">%&gt;%</span> </span>
<span id="cb119-3"><a href="predicting-course-evaluation-scores.html#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span><span class="fu">is_binary_var</span>(.)))</span>
<span id="cb119-4"><a href="predicting-course-evaluation-scores.html#cb119-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-5"><a href="predicting-course-evaluation-scores.html#cb119-5" aria-hidden="true" tabindex="-1"></a>explanatory_variables_course_discrete <span class="sc">%&gt;%</span> </span>
<span id="cb119-6"><a href="predicting-course-evaluation-scores.html#cb119-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_minimal</span>()</span></code></pre></div>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p50</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">lower</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.34</td>
<td align="right">0.47</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">▇▁▁▁▅</td>
</tr>
<tr class="even">
<td align="left">multiple_prof</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.34</td>
<td align="right">0.47</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">▇▁▁▁▅</td>
</tr>
<tr class="odd">
<td align="left">one_credit</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0.06</td>
<td align="right">0.23</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="predicting-course-evaluation-scores.html#cb120-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> explanatory_variables_course_discrete<span class="sc">%&gt;%</span></span>
<span id="cb120-2"><a href="predicting-course-evaluation-scores.html#cb120-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">skim_minimal</span>(<span class="at">show_data_completeness =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="predicting-course-evaluation-scores.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># omit one_credit variable</span></span>
<span id="cb121-2"><a href="predicting-course-evaluation-scores.html#cb121-2" aria-hidden="true" tabindex="-1"></a>explanatory_variables_course_discrete <span class="ot">&lt;-</span> explanatory_variables_course_discrete <span class="sc">%&gt;%</span> </span>
<span id="cb121-3"><a href="predicting-course-evaluation-scores.html#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>one_credit)</span></code></pre></div>
</div>
</div>
</div>
<div id="relationships-between-variables" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Relationships between variables</h3>
<p>Having looked in detail at each variable in isolation, I now turn to look at the relationships between the variables.</p>
<div id="relationships-between-continuous-variables" class="section level4" number="4.2.3.1">
<h4><span class="header-section-number">4.2.3.1</span> Relationships between continuous variables</h4>
<p>First looking at the correlation between each of the continuous variables. Reviewing the correlation matrix below, the key points I noted were:</p>
<ul>
<li><p>There is no co-linearity of concern between the continuous explanatory variables. The correlation coefficent of 0.8 between <code>prof_ave_rating</code> and <code>ave_teaching_qual</code> are to be expected given the later is calculated based on the former. This isn’t of concern as I wouldn’t expect to use both teaching related variables in the same model.</p></li>
<li><p>Only <code>prof_ave_rating</code> and <code>ave_teaching_qual</code> are strongly correlated with the response variable (<code>course_evaluation</code>). I have concerns that <code>prof_ave_rating</code> is so closely correlated <code>course_evaluation</code>, suggesting that may be students do not delineate the quality of the professor from the quality of the course (particularly given the coarse granularity of the Likhert scales used to collect the data).</p></li>
</ul>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="predicting-course-evaluation-scores.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a dataframe of all continuous variables (including the response variable)</span></span>
<span id="cb122-2"><a href="predicting-course-evaluation-scores.html#cb122-2" aria-hidden="true" tabindex="-1"></a>variables_all_cont <span class="ot">&lt;-</span> explanatory_variables_prof_cont <span class="sc">%&gt;%</span></span>
<span id="cb122-3"><a href="predicting-course-evaluation-scores.html#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(explanatory_variables_course_cont) <span class="sc">%&gt;%</span></span>
<span id="cb122-4"><a href="predicting-course-evaluation-scores.html#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">select</span>(teaching_eval_clean, course_evaluation)) <span class="sc">%&gt;%</span> </span>
<span id="cb122-5"><a href="predicting-course-evaluation-scores.html#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>prof_number, <span class="sc">-</span>age_binned)</span>
<span id="cb122-6"><a href="predicting-course-evaluation-scores.html#cb122-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-7"><a href="predicting-course-evaluation-scores.html#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="co"># produce correlation plot - default is Pearson  </span></span>
<span id="cb122-8"><a href="predicting-course-evaluation-scores.html#cb122-8" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> GGally<span class="sc">::</span><span class="fu">ggcorr</span>(variables_all_cont, <span class="at">label =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb122-9"><a href="predicting-course-evaluation-scores.html#cb122-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb122-10"><a href="predicting-course-evaluation-scores.html#cb122-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># note key observations</span></span>
<span id="cb122-11"><a href="predicting-course-evaluation-scores.html#cb122-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;There are no colinearity of concern between continuous explanatory variable&quot;</span>,</span>
<span id="cb122-12"><a href="predicting-course-evaluation-scores.html#cb122-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Unsuprisngly, teaching ratings are closely correlated with course evaluation scores&quot;</span>,</span>
<span id="cb122-13"><a href="predicting-course-evaluation-scores.html#cb122-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Pairwise Pearson&#39;s correlation coefficents are shown&quot;</span>) <span class="sc">+</span></span>
<span id="cb122-14"><a href="predicting-course-evaluation-scores.html#cb122-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-15"><a href="predicting-course-evaluation-scores.html#cb122-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adjust text size given plot sizes </span></span>
<span id="cb122-16"><a href="predicting-course-evaluation-scores.html#cb122-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb122-17"><a href="predicting-course-evaluation-scores.html#cb122-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb122-18"><a href="predicting-course-evaluation-scores.html#cb122-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb122-19"><a href="predicting-course-evaluation-scores.html#cb122-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) </span>
<span id="cb122-20"><a href="predicting-course-evaluation-scores.html#cb122-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-21"><a href="predicting-course-evaluation-scores.html#cb122-21" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-34-1.png" width="960" /></p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="predicting-course-evaluation-scores.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;test2.svg&quot;</span>)</span></code></pre></div>
</div>
<div id="relationships-between-discrete-variables-and-continuous-variables" class="section level4" number="4.2.3.2">
<h4><span class="header-section-number">4.2.3.2</span> Relationships between discrete variables and continuous variables</h4>
<p>As a final stage of the exploratory data analysis I wanted to quickly look at the relationships between the discrete and continuous predictors. In particular, I was interested in if there might be any interactions between the some of the discrete variables and the most promising predictor (<code>ave_teaching_qual</code>) of <code>course_evaluation</code>. In the code below I construct three plots to look at this.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="predicting-course-evaluation-scores.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine the different types of variables in to a single dataframe</span></span>
<span id="cb124-2"><a href="predicting-course-evaluation-scores.html#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="co"># so, I can look at interactions</span></span>
<span id="cb124-3"><a href="predicting-course-evaluation-scores.html#cb124-3" aria-hidden="true" tabindex="-1"></a>interactions_plot_df <span class="ot">&lt;-</span> variables_all_cont <span class="sc">%&gt;%</span> </span>
<span id="cb124-4"><a href="predicting-course-evaluation-scores.html#cb124-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(explanatory_variables_course_discrete,</span>
<span id="cb124-5"><a href="predicting-course-evaluation-scores.html#cb124-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(explanatory_variables_prof_discrete, <span class="sc">-</span>prof_number)) <span class="sc">%&gt;%</span> </span>
<span id="cb124-6"><a href="predicting-course-evaluation-scores.html#cb124-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(course_evaluation, ave_teaching_qual, female, minority, tenure_track)</span>
<span id="cb124-7"><a href="predicting-course-evaluation-scores.html#cb124-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-8"><a href="predicting-course-evaluation-scores.html#cb124-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-9"><a href="predicting-course-evaluation-scores.html#cb124-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Plots interactions between a specified bianry variable and the </span></span>
<span id="cb124-10"><a href="predicting-course-evaluation-scores.html#cb124-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; the most promising predictor (ave_teaching_qaul) of course_evaluation</span></span>
<span id="cb124-11"><a href="predicting-course-evaluation-scores.html#cb124-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb124-12"><a href="predicting-course-evaluation-scores.html#cb124-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param binary_var: a tidy select name for a column containing a binary variable</span></span>
<span id="cb124-13"><a href="predicting-course-evaluation-scores.html#cb124-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb124-14"><a href="predicting-course-evaluation-scores.html#cb124-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return: a ggplot object</span></span>
<span id="cb124-15"><a href="predicting-course-evaluation-scores.html#cb124-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb124-16"><a href="predicting-course-evaluation-scores.html#cb124-16" aria-hidden="true" tabindex="-1"></a>plot_interaction <span class="ot">&lt;-</span> <span class="cf">function</span>(binary_var){</span>
<span id="cb124-17"><a href="predicting-course-evaluation-scores.html#cb124-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb124-18"><a href="predicting-course-evaluation-scores.html#cb124-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create plot base</span></span>
<span id="cb124-19"><a href="predicting-course-evaluation-scores.html#cb124-19" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(interactions_plot_df,</span>
<span id="cb124-20"><a href="predicting-course-evaluation-scores.html#cb124-20" aria-hidden="true" tabindex="-1"></a>         <span class="fu">aes</span>(ave_teaching_qual, course_evaluation, </span>
<span id="cb124-21"><a href="predicting-course-evaluation-scores.html#cb124-21" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span> <span class="fu">factor</span>({{binary_var}}))</span>
<span id="cb124-22"><a href="predicting-course-evaluation-scores.html#cb124-22" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb124-23"><a href="predicting-course-evaluation-scores.html#cb124-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-24"><a href="predicting-course-evaluation-scores.html#cb124-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add data layers</span></span>
<span id="cb124-25"><a href="predicting-course-evaluation-scores.html#cb124-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb124-26"><a href="predicting-course-evaluation-scores.html#cb124-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">size =</span> <span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb124-27"><a href="predicting-course-evaluation-scores.html#cb124-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-28"><a href="predicting-course-evaluation-scores.html#cb124-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># customise coloring to make plot easier to interpret</span></span>
<span id="cb124-29"><a href="predicting-course-evaluation-scores.html#cb124-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_brewer</span>(<span class="at">type =</span> <span class="st">&quot;qual&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Set1&quot;</span>,</span>
<span id="cb124-30"><a href="predicting-course-evaluation-scores.html#cb124-30" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>)) <span class="sc">+</span></span>
<span id="cb124-31"><a href="predicting-course-evaluation-scores.html#cb124-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-32"><a href="predicting-course-evaluation-scores.html#cb124-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># so full x and y axis</span></span>
<span id="cb124-33"><a href="predicting-course-evaluation-scores.html#cb124-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expand_limits</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb124-34"><a href="predicting-course-evaluation-scores.html#cb124-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-35"><a href="predicting-course-evaluation-scores.html#cb124-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add plot labels</span></span>
<span id="cb124-36"><a href="predicting-course-evaluation-scores.html#cb124-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Average teaching quality delivered by professor&quot;</span>,</span>
<span id="cb124-37"><a href="predicting-course-evaluation-scores.html#cb124-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Course evaluation score</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb124-38"><a href="predicting-course-evaluation-scores.html#cb124-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-39"><a href="predicting-course-evaluation-scores.html#cb124-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove some clutter to make plot easier to interpret</span></span>
<span id="cb124-40"><a href="predicting-course-evaluation-scores.html#cb124-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb124-41"><a href="predicting-course-evaluation-scores.html#cb124-41" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span>
<span id="cb124-42"><a href="predicting-course-evaluation-scores.html#cb124-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-43"><a href="predicting-course-evaluation-scores.html#cb124-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(p)</span>
<span id="cb124-44"><a href="predicting-course-evaluation-scores.html#cb124-44" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb124-45"><a href="predicting-course-evaluation-scores.html#cb124-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-46"><a href="predicting-course-evaluation-scores.html#cb124-46" aria-hidden="true" tabindex="-1"></a><span class="co"># produce and label plots for the three potential interactions of interest</span></span>
<span id="cb124-47"><a href="predicting-course-evaluation-scores.html#cb124-47" aria-hidden="true" tabindex="-1"></a>p_f <span class="ot">&lt;-</span> <span class="fu">plot_interaction</span>(female) <span class="sc">+</span></span>
<span id="cb124-48"><a href="predicting-course-evaluation-scores.html#cb124-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">colour =</span> <span class="st">&quot;Female professor&quot;</span>,</span>
<span id="cb124-49"><a href="predicting-course-evaluation-scores.html#cb124-49" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span><span class="st">&quot;&quot;</span>,</span>
<span id="cb124-50"><a href="predicting-course-evaluation-scores.html#cb124-50" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Interaction between prof gender and course evaluation score?&quot;</span>)</span>
<span id="cb124-51"><a href="predicting-course-evaluation-scores.html#cb124-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-52"><a href="predicting-course-evaluation-scores.html#cb124-52" aria-hidden="true" tabindex="-1"></a>p_m <span class="ot">&lt;-</span> <span class="fu">plot_interaction</span>(minority) <span class="sc">+</span></span>
<span id="cb124-53"><a href="predicting-course-evaluation-scores.html#cb124-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">colour =</span> <span class="st">&quot;Professor with</span><span class="sc">\n</span><span class="st">minority ethnic</span><span class="sc">\n</span><span class="st">background&quot;</span>,</span>
<span id="cb124-54"><a href="predicting-course-evaluation-scores.html#cb124-54" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;&quot;</span>,<span class="at">title =</span> <span class="st">&quot;Interaction between prof background and course evaluation score?&quot;</span>)</span>
<span id="cb124-55"><a href="predicting-course-evaluation-scores.html#cb124-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-56"><a href="predicting-course-evaluation-scores.html#cb124-56" aria-hidden="true" tabindex="-1"></a>p_tt <span class="ot">&lt;-</span> <span class="fu">plot_interaction</span>(tenure_track) <span class="sc">+</span></span>
<span id="cb124-57"><a href="predicting-course-evaluation-scores.html#cb124-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">colour =</span> <span class="st">&quot;Professor with</span><span class="sc">\n</span><span class="st">tenure track&quot;</span>,</span>
<span id="cb124-58"><a href="predicting-course-evaluation-scores.html#cb124-58" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Interaction between prof tenure track status and course evaluation score?&quot;</span>)</span></code></pre></div>
<p>In each of the plots below, the dataset is partitioned based on the binary variable in question, and separate linear regression lines are plotted. So, for example, the first plot show the data partitioned into two group females and males (i.e. <code>female</code> = Yes and <code>female</code> = No).</p>
<p>Considering each of the binary variables in turn:</p>
<ul>
<li><p><code>female</code>: there is a difference in the slopes of the regression lines for the two groups, so there could be an interaction worth exploring in the model.</p></li>
<li><p><code>minority</code>: the regression lines for the two groups look pretty much the same, so there probably is not an interaction worth exploring in the model.</p></li>
<li><p><code>tenure_track</code>: there is a difference in the slopes of the regression lines for the two groups, so there could be an interaction worth exploring in the model.</p></li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="predicting-course-evaluation-scores.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine plots to make them easier to interpret as a group</span></span>
<span id="cb125-2"><a href="predicting-course-evaluation-scores.html#cb125-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> p_f <span class="sc">/</span> p_m <span class="sc">/</span> p_tt</span>
<span id="cb125-3"><a href="predicting-course-evaluation-scores.html#cb125-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-4"><a href="predicting-course-evaluation-scores.html#cb125-4" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="03_beauty_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="predicting-course-evaluation-scores.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;test4.svg&quot;</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="fitting-the-model-1" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Fitting the model</h2>
<p>Approach to developing the model</p>
<ul>
<li><p>Establish a starting point</p></li>
<li><p>Incremental add to the model and compare using loo log score (<code>elpd_loo</code>)</p></li>
</ul>
<div id="splitting-the-data" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Splitting the data</h3>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="predicting-course-evaluation-scores.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bring together all variables into a single data frame</span></span>
<span id="cb127-2"><a href="predicting-course-evaluation-scores.html#cb127-2" aria-hidden="true" tabindex="-1"></a>all_variables <span class="ot">&lt;-</span> <span class="fu">select</span>(teaching_eval_clean, course_evaluation) <span class="sc">%&gt;%</span> </span>
<span id="cb127-3"><a href="predicting-course-evaluation-scores.html#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(explanatory_variables_prof_cont,</span>
<span id="cb127-4"><a href="predicting-course-evaluation-scores.html#cb127-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">select</span>(explanatory_variables_prof_discrete, </span>
<span id="cb127-5"><a href="predicting-course-evaluation-scores.html#cb127-5" aria-hidden="true" tabindex="-1"></a>                   <span class="sc">-</span>prof_number, <span class="sc">-</span> age_binned),</span>
<span id="cb127-6"><a href="predicting-course-evaluation-scores.html#cb127-6" aria-hidden="true" tabindex="-1"></a>            explanatory_variables_course_cont,</span>
<span id="cb127-7"><a href="predicting-course-evaluation-scores.html#cb127-7" aria-hidden="true" tabindex="-1"></a>            explanatory_variables_course_discrete) <span class="sc">%&gt;%</span> </span>
<span id="cb127-8"><a href="predicting-course-evaluation-scores.html#cb127-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() </span>
<span id="cb127-9"><a href="predicting-course-evaluation-scores.html#cb127-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-10"><a href="predicting-course-evaluation-scores.html#cb127-10" aria-hidden="true" tabindex="-1"></a>all_variables</span></code></pre></div>
<pre><code>## # A tibble: 463 x 17
##    course_evaluation prof_number   age prof_ave_rating prof_ave_beauty_rating
##                &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;                  &lt;dbl&gt;
##  1               4.3           1    36             4.7                 0.202 
##  2               4.5           2    59             4.6                -0.826 
##  3               3.7           3    51             4.1                -0.660 
##  4               4.3           4    40             4.5                -0.766 
##  5               4.4           5    31             4.8                 1.42  
##  6               4.2           6    62             4.4                 0.500 
##  7               4             7    33             4.4                -0.214 
##  8               3.4           8    51             3.4                -0.347 
##  9               4.5           9    33             4.8                 0.0613
## 10               3.9          10    47             4                   0.453 
## # ... with 453 more rows, and 12 more variables: ave_teaching_qual &lt;dbl&gt;,
## #   age_binned &lt;fct&gt;, tenured &lt;dbl&gt;, minority &lt;dbl&gt;, female &lt;dbl&gt;,
## #   formal &lt;dbl&gt;, non_native_english &lt;dbl&gt;, tenure_track &lt;dbl&gt;,
## #   eval_response_rate &lt;dbl&gt;, students &lt;dbl&gt;, lower &lt;dbl&gt;, multiple_prof &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="predicting-course-evaluation-scores.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># %&gt;% </span></span>
<span id="cb129-2"><a href="predicting-course-evaluation-scores.html#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  rename_with(.fn = ~ str_remove(., pattern = &#39;_\\d&#39;))</span></span></code></pre></div>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="predicting-course-evaluation-scores.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to ensure split is reproducible</span></span>
<span id="cb130-2"><a href="predicting-course-evaluation-scores.html#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123456</span>)</span>
<span id="cb130-3"><a href="predicting-course-evaluation-scores.html#cb130-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-4"><a href="predicting-course-evaluation-scores.html#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create train and test datasets</span></span>
<span id="cb130-5"><a href="predicting-course-evaluation-scores.html#cb130-5" aria-hidden="true" tabindex="-1"></a>teaching_split <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">initial_split</span>(all_variables, <span class="at">prop =</span> <span class="fl">0.8</span>)</span>
<span id="cb130-6"><a href="predicting-course-evaluation-scores.html#cb130-6" aria-hidden="true" tabindex="-1"></a>teaching_train <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">training</span>(teaching_split)</span>
<span id="cb130-7"><a href="predicting-course-evaluation-scores.html#cb130-7" aria-hidden="true" tabindex="-1"></a>teaching_test <span class="ot">&lt;-</span> rsample<span class="sc">::</span><span class="fu">testing</span>(teaching_split)</span></code></pre></div>
</div>
<div id="minimal-and-maximal-models" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Minimal and maximal models</h3>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="predicting-course-evaluation-scores.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Provides a summary of loo cross validation metrics for stan_glm model</span></span>
<span id="cb131-2"><a href="predicting-course-evaluation-scores.html#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb131-3"><a href="predicting-course-evaluation-scores.html#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param stan_lm_mod: an object with the classes &quot;stanreg&quot;, &quot;glm&quot; and &quot;lm&quot;   </span></span>
<span id="cb131-4"><a href="predicting-course-evaluation-scores.html#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb131-5"><a href="predicting-course-evaluation-scores.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return: a tibble of metrics</span></span>
<span id="cb131-6"><a href="predicting-course-evaluation-scores.html#cb131-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-7"><a href="predicting-course-evaluation-scores.html#cb131-7" aria-hidden="true" tabindex="-1"></a>stan_glm_metric_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(stan_lm_mod, <span class="at">as_kable =</span> <span class="cn">FALSE</span>){</span>
<span id="cb131-8"><a href="predicting-course-evaluation-scores.html#cb131-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-9"><a href="predicting-course-evaluation-scores.html#cb131-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate r2 metrics mod</span></span>
<span id="cb131-10"><a href="predicting-course-evaluation-scores.html#cb131-10" aria-hidden="true" tabindex="-1"></a>  r2 <span class="ot">&lt;-</span> <span class="fu">loo_R2</span>(stan_lm_mod)</span>
<span id="cb131-11"><a href="predicting-course-evaluation-scores.html#cb131-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-12"><a href="predicting-course-evaluation-scores.html#cb131-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate loo metrics</span></span>
<span id="cb131-13"><a href="predicting-course-evaluation-scores.html#cb131-13" aria-hidden="true" tabindex="-1"></a>  metrics <span class="ot">&lt;-</span> <span class="fu">loo</span>(stan_lm_mod)<span class="sc">$</span>estimates <span class="sc">%&gt;%</span> </span>
<span id="cb131-14"><a href="predicting-course-evaluation-scores.html#cb131-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb131-15"><a href="predicting-course-evaluation-scores.html#cb131-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">#reformat for ease of use</span></span>
<span id="cb131-16"><a href="predicting-course-evaluation-scores.html#cb131-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb131-17"><a href="predicting-course-evaluation-scores.html#cb131-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">&quot;Metric&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-18"><a href="predicting-course-evaluation-scores.html#cb131-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb131-19"><a href="predicting-course-evaluation-scores.html#cb131-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add r2 to loo metrics</span></span>
<span id="cb131-20"><a href="predicting-course-evaluation-scores.html#cb131-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="at">Metric =</span> <span class="st">&quot;r2&quot;</span>,</span>
<span id="cb131-21"><a href="predicting-course-evaluation-scores.html#cb131-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">Estimate =</span> <span class="fu">median</span>(r2),</span>
<span id="cb131-22"><a href="predicting-course-evaluation-scores.html#cb131-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">SE =</span> <span class="fu">sd</span>(r2))</span>
<span id="cb131-23"><a href="predicting-course-evaluation-scores.html#cb131-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-24"><a href="predicting-course-evaluation-scores.html#cb131-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">#return results</span></span>
<span id="cb131-25"><a href="predicting-course-evaluation-scores.html#cb131-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (as_kable <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="fu">return</span>(metrics)</span>
<span id="cb131-26"><a href="predicting-course-evaluation-scores.html#cb131-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">return</span>(knitr<span class="sc">::</span><span class="fu">kable</span>(metrics))</span>
<span id="cb131-27"><a href="predicting-course-evaluation-scores.html#cb131-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb131-28"><a href="predicting-course-evaluation-scores.html#cb131-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-29"><a href="predicting-course-evaluation-scores.html#cb131-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-30"><a href="predicting-course-evaluation-scores.html#cb131-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Compares to two stan_glm models by loo cross validation metrics</span></span>
<span id="cb131-31"><a href="predicting-course-evaluation-scores.html#cb131-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb131-32"><a href="predicting-course-evaluation-scores.html#cb131-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param mod_1: an object with the classes &quot;stanreg&quot;, &quot;glm&quot; and &quot;lm&quot;   </span></span>
<span id="cb131-33"><a href="predicting-course-evaluation-scores.html#cb131-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param mod_2: an object with the classes &quot;stanreg&quot;, &quot;glm&quot; and &quot;lm&quot;   </span></span>
<span id="cb131-34"><a href="predicting-course-evaluation-scores.html#cb131-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb131-35"><a href="predicting-course-evaluation-scores.html#cb131-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return: a tibble of metrics</span></span>
<span id="cb131-36"><a href="predicting-course-evaluation-scores.html#cb131-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-37"><a href="predicting-course-evaluation-scores.html#cb131-37" aria-hidden="true" tabindex="-1"></a>stan_glm_loo_comp <span class="ot">&lt;-</span> <span class="cf">function</span>(mod_1, mod_2, <span class="at">as_kable =</span> <span class="cn">FALSE</span>){</span>
<span id="cb131-38"><a href="predicting-course-evaluation-scores.html#cb131-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-39"><a href="predicting-course-evaluation-scores.html#cb131-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># compare the two models</span></span>
<span id="cb131-40"><a href="predicting-course-evaluation-scores.html#cb131-40" aria-hidden="true" tabindex="-1"></a>  comp <span class="ot">&lt;-</span> <span class="fu">loo_compare</span>(<span class="fu">loo</span>(mod_1), <span class="fu">loo</span>(mod_2))</span>
<span id="cb131-41"><a href="predicting-course-evaluation-scores.html#cb131-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-42"><a href="predicting-course-evaluation-scores.html#cb131-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert comparision output to make it easier to process</span></span>
<span id="cb131-43"><a href="predicting-course-evaluation-scores.html#cb131-43" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> comp <span class="sc">%&gt;%</span> </span>
<span id="cb131-44"><a href="predicting-course-evaluation-scores.html#cb131-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb131-45"><a href="predicting-course-evaluation-scores.html#cb131-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb131-46"><a href="predicting-course-evaluation-scores.html#cb131-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># reformat output for ease of interpretation</span></span>
<span id="cb131-47"><a href="predicting-course-evaluation-scores.html#cb131-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">&quot;Model&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb131-48"><a href="predicting-course-evaluation-scores.html#cb131-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> elpd_diff<span class="sc">:</span>se_looic, </span>
<span id="cb131-49"><a href="predicting-course-evaluation-scores.html#cb131-49" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;Metric&quot;</span>, </span>
<span id="cb131-50"><a href="predicting-course-evaluation-scores.html#cb131-50" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;Estimate&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb131-51"><a href="predicting-course-evaluation-scores.html#cb131-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb131-52"><a href="predicting-course-evaluation-scores.html#cb131-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;Model&quot;</span>, </span>
<span id="cb131-53"><a href="predicting-course-evaluation-scores.html#cb131-53" aria-hidden="true" tabindex="-1"></a>                <span class="at">values_from =</span> <span class="st">&quot;Estimate&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb131-54"><a href="predicting-course-evaluation-scores.html#cb131-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb131-55"><a href="predicting-course-evaluation-scores.html#cb131-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add in r2 metrics</span></span>
<span id="cb131-56"><a href="predicting-course-evaluation-scores.html#cb131-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_row</span>(<span class="at">Metric =</span> <span class="st">&quot;r2&quot;</span>, </span>
<span id="cb131-57"><a href="predicting-course-evaluation-scores.html#cb131-57" aria-hidden="true" tabindex="-1"></a>            <span class="at">mod_1 =</span> <span class="fu">median</span>(<span class="fu">loo_R2</span>(mod_1)),</span>
<span id="cb131-58"><a href="predicting-course-evaluation-scores.html#cb131-58" aria-hidden="true" tabindex="-1"></a>            <span class="at">mod_2 =</span> <span class="fu">median</span>(<span class="fu">loo_R2</span>(mod_2)))</span>
<span id="cb131-59"><a href="predicting-course-evaluation-scores.html#cb131-59" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-60"><a href="predicting-course-evaluation-scores.html#cb131-60" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename columns to the names of the objects passed to the function</span></span>
<span id="cb131-61"><a href="predicting-course-evaluation-scores.html#cb131-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(res) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Metric&quot;</span>, </span>
<span id="cb131-62"><a href="predicting-course-evaluation-scores.html#cb131-62" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">deparse</span>(<span class="fu">substitute</span>(mod_1)), </span>
<span id="cb131-63"><a href="predicting-course-evaluation-scores.html#cb131-63" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">deparse</span>(<span class="fu">substitute</span>(mod_2)))</span>
<span id="cb131-64"><a href="predicting-course-evaluation-scores.html#cb131-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-65"><a href="predicting-course-evaluation-scores.html#cb131-65" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return results</span></span>
<span id="cb131-66"><a href="predicting-course-evaluation-scores.html#cb131-66" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (as_kable <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="fu">return</span>(res)</span>
<span id="cb131-67"><a href="predicting-course-evaluation-scores.html#cb131-67" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">return</span>(knitr<span class="sc">::</span><span class="fu">kable</span>(res))</span>
<span id="cb131-68"><a href="predicting-course-evaluation-scores.html#cb131-68" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Minimal model: the most promising predictor identified in the EDA</p>
<p>Maximal model: all predictors, where there are multiple predictors relating to the same underlying construct (e.g. <code>age</code> and <code>age_binned</code>) only one is retained.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="predicting-course-evaluation-scores.html#cb132-1" aria-hidden="true" tabindex="-1"></a>lm_min <span class="ot">&lt;-</span> <span class="fu">stan_glm</span>(course_evaluation <span class="sc">~</span> ave_teaching_qual, <span class="at">data =</span> teaching_train, </span>
<span id="cb132-2"><a href="predicting-course-evaluation-scores.html#cb132-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">refresh =</span> <span class="dv">0</span>)</span>
<span id="cb132-3"><a href="predicting-course-evaluation-scores.html#cb132-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-4"><a href="predicting-course-evaluation-scores.html#cb132-4" aria-hidden="true" tabindex="-1"></a>lm_max <span class="ot">&lt;-</span> <span class="fu">stan_glm</span>(course_evaluation <span class="sc">~</span> ., </span>
<span id="cb132-5"><a href="predicting-course-evaluation-scores.html#cb132-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> <span class="fu">select</span>(teaching_train,</span>
<span id="cb132-6"><a href="predicting-course-evaluation-scores.html#cb132-6" aria-hidden="true" tabindex="-1"></a>                                 <span class="sc">-</span> prof_number,</span>
<span id="cb132-7"><a href="predicting-course-evaluation-scores.html#cb132-7" aria-hidden="true" tabindex="-1"></a>                                 <span class="sc">-</span> prof_ave_rating,</span>
<span id="cb132-8"><a href="predicting-course-evaluation-scores.html#cb132-8" aria-hidden="true" tabindex="-1"></a>                                 <span class="sc">-</span> age_binned), </span>
<span id="cb132-9"><a href="predicting-course-evaluation-scores.html#cb132-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">refresh =</span> <span class="dv">0</span>)</span>
<span id="cb132-10"><a href="predicting-course-evaluation-scores.html#cb132-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-11"><a href="predicting-course-evaluation-scores.html#cb132-11" aria-hidden="true" tabindex="-1"></a>lm_min</span></code></pre></div>
<pre><code>## stan_glm
##  family:       gaussian [identity]
##  formula:      course_evaluation ~ ave_teaching_qual
##  observations: 371
##  predictors:   2
## ------
##                   Median MAD_SD
## (Intercept)       -0.1    0.2  
## ave_teaching_qual  1.0    0.0  
## 
## Auxiliary parameter(s):
##       Median MAD_SD
## sigma 0.4    0.0   
## 
## ------
## * For help interpreting the printed output see ?print.stanreg
## * For info on the priors used see ?prior_summary.stanreg</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="predicting-course-evaluation-scores.html#cb134-1" aria-hidden="true" tabindex="-1"></a>lm_max</span></code></pre></div>
<pre><code>## stan_glm
##  family:       gaussian [identity]
##  formula:      course_evaluation ~ .
##  observations: 371
##  predictors:   14
## ------
##                        Median MAD_SD
## (Intercept)             0.0    0.3  
## age                     0.0    0.0  
## prof_ave_beauty_rating  0.0    0.0  
## ave_teaching_qual       0.9    0.1  
## tenured                 0.0    0.1  
## minority                0.0    0.1  
## female                 -0.1    0.0  
## formal                  0.1    0.1  
## non_native_english     -0.2    0.1  
## tenure_track            0.0    0.1  
## eval_response_rate      0.0    0.0  
## students                0.0    0.0  
## lower                   0.0    0.0  
## multiple_prof          -0.1    0.0  
## 
## Auxiliary parameter(s):
##       Median MAD_SD
## sigma 0.4    0.0   
## 
## ------
## * For help interpreting the printed output see ?print.stanreg
## * For info on the priors used see ?prior_summary.stanreg</code></pre>
<p>Comparing the log scores from the leave-one-out cross validation (<code>elpd_loo</code>) the minimal model performs slightly better. So, I’ll use the minimal model as the starting point for building a better model.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="predicting-course-evaluation-scores.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stan_glm_metric_summary</span>(lm_min, <span class="at">as_kable =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Metric</th>
<th align="right">Estimate</th>
<th align="right">SE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">elpd_loo</td>
<td align="right">-173.0884824</td>
<td align="right">16.4984436</td>
</tr>
<tr class="even">
<td align="left">p_loo</td>
<td align="right">3.1546102</td>
<td align="right">0.5467246</td>
</tr>
<tr class="odd">
<td align="left">looic</td>
<td align="right">346.1769648</td>
<td align="right">32.9968872</td>
</tr>
<tr class="even">
<td align="left">r2</td>
<td align="right">0.5398558</td>
<td align="right">0.0377842</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="predicting-course-evaluation-scores.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stan_glm_metric_summary</span>(lm_max, <span class="at">as_kable =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Metric</th>
<th align="right">Estimate</th>
<th align="right">SE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">elpd_loo</td>
<td align="right">-174.0492755</td>
<td align="right">17.1412991</td>
</tr>
<tr class="even">
<td align="left">p_loo</td>
<td align="right">14.9007741</td>
<td align="right">1.4595946</td>
</tr>
<tr class="odd">
<td align="left">looic</td>
<td align="right">348.0985510</td>
<td align="right">34.2825982</td>
</tr>
<tr class="even">
<td align="left">r2</td>
<td align="right">0.5376852</td>
<td align="right">0.0390503</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="predicting-course-evaluation-scores.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stan_glm_loo_comp</span>(lm_min, lm_max, <span class="at">as_kable =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Metric</th>
<th align="right">lm_min</th>
<th align="right">lm_max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">elpd_diff</td>
<td align="right">0.0000000</td>
<td align="right">-0.9607931</td>
</tr>
<tr class="even">
<td align="left">se_diff</td>
<td align="right">0.0000000</td>
<td align="right">4.6783376</td>
</tr>
<tr class="odd">
<td align="left">elpd_loo</td>
<td align="right">-173.0884824</td>
<td align="right">-174.0492755</td>
</tr>
<tr class="even">
<td align="left">se_elpd_loo</td>
<td align="right">16.4984436</td>
<td align="right">17.1412991</td>
</tr>
<tr class="odd">
<td align="left">p_loo</td>
<td align="right">3.1546102</td>
<td align="right">14.9007741</td>
</tr>
<tr class="even">
<td align="left">se_p_loo</td>
<td align="right">0.5467246</td>
<td align="right">1.4595946</td>
</tr>
<tr class="odd">
<td align="left">looic</td>
<td align="right">346.1769648</td>
<td align="right">348.0985510</td>
</tr>
<tr class="even">
<td align="left">se_looic</td>
<td align="right">32.9968872</td>
<td align="right">34.2825982</td>
</tr>
<tr class="odd">
<td align="left">r2</td>
<td align="right">0.5398558</td>
<td align="right">0.5376852</td>
</tr>
</tbody>
</table>
</div>
<div id="iteration-1-adding-two-continuous-variables" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Iteration 1: Adding two continuous variables</h3>
<p>Next I try adding two continuous variables (<code>prof_ave_beauty_rating</code> and <code>eval_response_rate</code>) as predictors. These were the two variables after <code>ave_teaching_qual</code> with the next highest (albeit low) levels of correlation with <code>course_evaluation</code>. After adding these variables the model performance is the same as the minimal model. So, I’ll keep working with the minimal model as the best performing model for now.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="predicting-course-evaluation-scores.html#cb139-1" aria-hidden="true" tabindex="-1"></a>lm_1 <span class="ot">&lt;-</span> <span class="fu">stan_glm</span>(course_evaluation <span class="sc">~</span> </span>
<span id="cb139-2"><a href="predicting-course-evaluation-scores.html#cb139-2" aria-hidden="true" tabindex="-1"></a>           ave_teaching_qual <span class="sc">+</span> eval_response_rate <span class="sc">+</span></span>
<span id="cb139-3"><a href="predicting-course-evaluation-scores.html#cb139-3" aria-hidden="true" tabindex="-1"></a>           prof_ave_beauty_rating,</span>
<span id="cb139-4"><a href="predicting-course-evaluation-scores.html#cb139-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span> teaching_train, </span>
<span id="cb139-5"><a href="predicting-course-evaluation-scores.html#cb139-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">refresh =</span> <span class="dv">0</span>)</span>
<span id="cb139-6"><a href="predicting-course-evaluation-scores.html#cb139-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-7"><a href="predicting-course-evaluation-scores.html#cb139-7" aria-hidden="true" tabindex="-1"></a><span class="fu">stan_glm_loo_comp</span>(lm_min, lm_1, <span class="at">as_kable =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Metric</th>
<th align="right">lm_min</th>
<th align="right">lm_1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">elpd_diff</td>
<td align="right">0.0000000</td>
<td align="right">-0.2398614</td>
</tr>
<tr class="even">
<td align="left">se_diff</td>
<td align="right">0.0000000</td>
<td align="right">2.4155078</td>
</tr>
<tr class="odd">
<td align="left">elpd_loo</td>
<td align="right">-172.8486210</td>
<td align="right">-173.0884824</td>
</tr>
<tr class="even">
<td align="left">se_elpd_loo</td>
<td align="right">16.9855842</td>
<td align="right">16.4984436</td>
</tr>
<tr class="odd">
<td align="left">p_loo</td>
<td align="right">5.2861458</td>
<td align="right">3.1546102</td>
</tr>
<tr class="even">
<td align="left">se_p_loo</td>
<td align="right">0.7842139</td>
<td align="right">0.5467246</td>
</tr>
<tr class="odd">
<td align="left">looic</td>
<td align="right">345.6972420</td>
<td align="right">346.1769648</td>
</tr>
<tr class="even">
<td align="left">se_looic</td>
<td align="right">33.9711684</td>
<td align="right">32.9968872</td>
</tr>
<tr class="odd">
<td align="left">r2</td>
<td align="right">0.5423901</td>
<td align="right">0.5398558</td>
</tr>
</tbody>
</table>
</div>
<div id="iteration-2-adding-in-discrete-variables" class="section level3" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Iteration 2: adding in discrete variables</h3>
<p>Next I try adding in the three discrete variables which had non-zero coefficients in the maximal model (<code>non_native_english</code> + <code>female</code> + <code>multiple_prof</code>). Again this doesn’t result in any improvements to model performance as measured by the cross validation log score (elpd_loo)</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="predicting-course-evaluation-scores.html#cb140-1" aria-hidden="true" tabindex="-1"></a>lm_2 <span class="ot">&lt;-</span> <span class="fu">stan_glm</span>(course_evaluation <span class="sc">~</span> </span>
<span id="cb140-2"><a href="predicting-course-evaluation-scores.html#cb140-2" aria-hidden="true" tabindex="-1"></a>                   ave_teaching_qual <span class="sc">+</span></span>
<span id="cb140-3"><a href="predicting-course-evaluation-scores.html#cb140-3" aria-hidden="true" tabindex="-1"></a>                   <span class="co"># add discrete predictors</span></span>
<span id="cb140-4"><a href="predicting-course-evaluation-scores.html#cb140-4" aria-hidden="true" tabindex="-1"></a>                   non_native_english <span class="sc">+</span> female <span class="sc">+</span> multiple_prof,</span>
<span id="cb140-5"><a href="predicting-course-evaluation-scores.html#cb140-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> teaching_train, </span>
<span id="cb140-6"><a href="predicting-course-evaluation-scores.html#cb140-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">refresh =</span> <span class="dv">0</span>)</span>
<span id="cb140-7"><a href="predicting-course-evaluation-scores.html#cb140-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-8"><a href="predicting-course-evaluation-scores.html#cb140-8" aria-hidden="true" tabindex="-1"></a><span class="fu">stan_glm_loo_comp</span>(lm_min,lm_2, <span class="at">as_kable =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Metric</th>
<th align="right">lm_min</th>
<th align="right">lm_2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">elpd_diff</td>
<td align="right">0.0000000</td>
<td align="right">-0.9209362</td>
</tr>
<tr class="even">
<td align="left">se_diff</td>
<td align="right">0.0000000</td>
<td align="right">2.2909954</td>
</tr>
<tr class="odd">
<td align="left">elpd_loo</td>
<td align="right">-173.0884824</td>
<td align="right">-174.0094186</td>
</tr>
<tr class="even">
<td align="left">se_elpd_loo</td>
<td align="right">16.4984436</td>
<td align="right">16.7649547</td>
</tr>
<tr class="odd">
<td align="left">p_loo</td>
<td align="right">3.1546102</td>
<td align="right">6.3682923</td>
</tr>
<tr class="even">
<td align="left">se_p_loo</td>
<td align="right">0.5467246</td>
<td align="right">0.8387327</td>
</tr>
<tr class="odd">
<td align="left">looic</td>
<td align="right">346.1769648</td>
<td align="right">348.0188372</td>
</tr>
<tr class="even">
<td align="left">se_looic</td>
<td align="right">32.9968872</td>
<td align="right">33.5299094</td>
</tr>
<tr class="odd">
<td align="left">r2</td>
<td align="right">0.5398558</td>
<td align="right">0.5386075</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="predicting-course-evaluation-scores.html#cb141-1" aria-hidden="true" tabindex="-1"></a>lm_2</span></code></pre></div>
<pre><code>## stan_glm
##  family:       gaussian [identity]
##  formula:      course_evaluation ~ ave_teaching_qual + non_native_english + 
##     female + multiple_prof
##  observations: 371
##  predictors:   5
## ------
##                    Median MAD_SD
## (Intercept)         0.1    0.2  
## ave_teaching_qual   1.0    0.0  
## non_native_english -0.1    0.1  
## female             -0.1    0.0  
## multiple_prof       0.0    0.0  
## 
## Auxiliary parameter(s):
##       Median MAD_SD
## sigma 0.4    0.0   
## 
## ------
## * For help interpreting the printed output see ?print.stanreg
## * For info on the priors used see ?prior_summary.stanreg</code></pre>
</div>
<div id="iteration-3-adding-in-interactions" class="section level3" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Iteration 3: adding in interactions</h3>
<p>Next I try adding in interaction between the discrete predictors and <code>ave_teaching_qual</code>. As I would assume that if they are associated with the <code>course_evaluation</code> scores given by students, they will also be associated with the <code>prof_ratings</code> given by students (which have been average to give <code>ave_teaching_qual</code>).</p>
<p>Adding in these interactions seems to make things worse, and the minimal model remains the best model to date (in terms of log score).</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="predicting-course-evaluation-scores.html#cb143-1" aria-hidden="true" tabindex="-1"></a>lm_3 <span class="ot">&lt;-</span> <span class="fu">stan_glm</span>(course_evaluation <span class="sc">~</span> </span>
<span id="cb143-2"><a href="predicting-course-evaluation-scores.html#cb143-2" aria-hidden="true" tabindex="-1"></a>                   ave_teaching_qual <span class="sc">+</span></span>
<span id="cb143-3"><a href="predicting-course-evaluation-scores.html#cb143-3" aria-hidden="true" tabindex="-1"></a>                   non_native_english <span class="sc">+</span> female <span class="sc">+</span> multiple_prof <span class="sc">+</span></span>
<span id="cb143-4"><a href="predicting-course-evaluation-scores.html#cb143-4" aria-hidden="true" tabindex="-1"></a>                   <span class="co"># add interactions between discrete predictors and the continuous predictor</span></span>
<span id="cb143-5"><a href="predicting-course-evaluation-scores.html#cb143-5" aria-hidden="true" tabindex="-1"></a>                   ave_teaching_qual<span class="sc">:</span>non_native_english <span class="sc">+</span> ave_teaching_qual<span class="sc">:</span>female <span class="sc">+</span> </span>
<span id="cb143-6"><a href="predicting-course-evaluation-scores.html#cb143-6" aria-hidden="true" tabindex="-1"></a>                   ave_teaching_qual<span class="sc">:</span>multiple_prof,</span>
<span id="cb143-7"><a href="predicting-course-evaluation-scores.html#cb143-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> teaching_train, </span>
<span id="cb143-8"><a href="predicting-course-evaluation-scores.html#cb143-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">refresh =</span> <span class="dv">0</span>)</span>
<span id="cb143-9"><a href="predicting-course-evaluation-scores.html#cb143-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-10"><a href="predicting-course-evaluation-scores.html#cb143-10" aria-hidden="true" tabindex="-1"></a><span class="fu">stan_glm_loo_comp</span>(lm_min,lm_3, <span class="at">as_kable =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Metric</th>
<th align="right">lm_min</th>
<th align="right">lm_3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">elpd_diff</td>
<td align="right">0.0000000</td>
<td align="right">-3.1455579</td>
</tr>
<tr class="even">
<td align="left">se_diff</td>
<td align="right">0.0000000</td>
<td align="right">2.4034963</td>
</tr>
<tr class="odd">
<td align="left">elpd_loo</td>
<td align="right">-173.0884824</td>
<td align="right">-176.2340403</td>
</tr>
<tr class="even">
<td align="left">se_elpd_loo</td>
<td align="right">16.4984436</td>
<td align="right">16.6240223</td>
</tr>
<tr class="odd">
<td align="left">p_loo</td>
<td align="right">3.1546102</td>
<td align="right">8.6670133</td>
</tr>
<tr class="even">
<td align="left">se_p_loo</td>
<td align="right">0.5467246</td>
<td align="right">1.0750751</td>
</tr>
<tr class="odd">
<td align="left">looic</td>
<td align="right">346.1769648</td>
<td align="right">352.4680806</td>
</tr>
<tr class="even">
<td align="left">se_looic</td>
<td align="right">32.9968872</td>
<td align="right">33.2480447</td>
</tr>
<tr class="odd">
<td align="left">r2</td>
<td align="right">0.5398558</td>
<td align="right">0.5342003</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="predicting-course-evaluation-scores.html#cb144-1" aria-hidden="true" tabindex="-1"></a>lm_3</span></code></pre></div>
<pre><code>## stan_glm
##  family:       gaussian [identity]
##  formula:      course_evaluation ~ ave_teaching_qual + non_native_english + 
##     female + multiple_prof + ave_teaching_qual:non_native_english + 
##     ave_teaching_qual:female + ave_teaching_qual:multiple_prof
##  observations: 371
##  predictors:   8
## ------
##                                      Median MAD_SD
## (Intercept)                          -0.1    0.3  
## ave_teaching_qual                     1.0    0.1  
## non_native_english                    0.4    1.4  
## female                                0.3    0.4  
## multiple_prof                         0.1    0.4  
## ave_teaching_qual:non_native_english -0.1    0.4  
## ave_teaching_qual:female             -0.1    0.1  
## ave_teaching_qual:multiple_prof       0.0    0.1  
## 
## Auxiliary parameter(s):
##       Median MAD_SD
## sigma 0.4    0.0   
## 
## ------
## * For help interpreting the printed output see ?print.stanreg
## * For info on the priors used see ?prior_summary.stanreg</code></pre>
</div>
<div id="iteration-4-reducing-number-of-discrete-predictors-used-to-simplify-the-model" class="section level3" number="4.3.6">
<h3><span class="header-section-number">4.3.6</span> Iteration 4: reducing number of discrete predictors used to simplify the model</h3>
<p>Next I tried simplifying the model by reducing the number of discrete predictors and interaction. I leave <code>non_native_english</code> speaker in as a predictor as in the previous model it had a non-zero coefficient (albeit with considerable uncertainty around it). However, the revised model also performs marginally worse than the minimal model.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="predicting-course-evaluation-scores.html#cb146-1" aria-hidden="true" tabindex="-1"></a>lm_4 <span class="ot">&lt;-</span> <span class="fu">stan_glm</span>(course_evaluation <span class="sc">~</span> </span>
<span id="cb146-2"><a href="predicting-course-evaluation-scores.html#cb146-2" aria-hidden="true" tabindex="-1"></a>                   ave_teaching_qual <span class="sc">+</span></span>
<span id="cb146-3"><a href="predicting-course-evaluation-scores.html#cb146-3" aria-hidden="true" tabindex="-1"></a>                   non_native_english <span class="sc">+</span></span>
<span id="cb146-4"><a href="predicting-course-evaluation-scores.html#cb146-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-5"><a href="predicting-course-evaluation-scores.html#cb146-5" aria-hidden="true" tabindex="-1"></a>                   ave_teaching_qual<span class="sc">:</span>non_native_english,</span>
<span id="cb146-6"><a href="predicting-course-evaluation-scores.html#cb146-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> teaching_train, </span>
<span id="cb146-7"><a href="predicting-course-evaluation-scores.html#cb146-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">refresh =</span> <span class="dv">0</span>)</span>
<span id="cb146-8"><a href="predicting-course-evaluation-scores.html#cb146-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-9"><a href="predicting-course-evaluation-scores.html#cb146-9" aria-hidden="true" tabindex="-1"></a><span class="fu">stan_glm_loo_comp</span>(lm_min,lm_4, <span class="at">as_kable =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Metric</th>
<th align="right">lm_min</th>
<th align="right">lm_4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">elpd_diff</td>
<td align="right">0.0000000</td>
<td align="right">-1.1228167</td>
</tr>
<tr class="even">
<td align="left">se_diff</td>
<td align="right">0.0000000</td>
<td align="right">1.8001823</td>
</tr>
<tr class="odd">
<td align="left">elpd_loo</td>
<td align="right">-173.0884824</td>
<td align="right">-174.2112991</td>
</tr>
<tr class="even">
<td align="left">se_elpd_loo</td>
<td align="right">16.4984436</td>
<td align="right">16.5730517</td>
</tr>
<tr class="odd">
<td align="left">p_loo</td>
<td align="right">3.1546102</td>
<td align="right">5.3133395</td>
</tr>
<tr class="even">
<td align="left">se_p_loo</td>
<td align="right">0.5467246</td>
<td align="right">0.8779247</td>
</tr>
<tr class="odd">
<td align="left">looic</td>
<td align="right">346.1769648</td>
<td align="right">348.4225982</td>
</tr>
<tr class="even">
<td align="left">se_looic</td>
<td align="right">32.9968872</td>
<td align="right">33.1461033</td>
</tr>
<tr class="odd">
<td align="left">r2</td>
<td align="right">0.5398558</td>
<td align="right">0.5383073</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="predicting-course-evaluation-scores.html#cb147-1" aria-hidden="true" tabindex="-1"></a>lm_4</span></code></pre></div>
<pre><code>## stan_glm
##  family:       gaussian [identity]
##  formula:      course_evaluation ~ ave_teaching_qual + non_native_english + 
##     ave_teaching_qual:non_native_english
##  observations: 371
##  predictors:   4
## ------
##                                      Median MAD_SD
## (Intercept)                           0.0    0.2  
## ave_teaching_qual                     1.0    0.0  
## non_native_english                    0.5    1.4  
## ave_teaching_qual:non_native_english -0.2    0.4  
## 
## Auxiliary parameter(s):
##       Median MAD_SD
## sigma 0.4    0.0   
## 
## ------
## * For help interpreting the printed output see ?print.stanreg
## * For info on the priors used see ?prior_summary.stanreg</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="predicting-course-evaluation-scores.html#cb149-1" aria-hidden="true" tabindex="-1"></a>lm_5 <span class="ot">&lt;-</span> <span class="fu">stan_glm</span>(course_evaluation <span class="sc">~</span> </span>
<span id="cb149-2"><a href="predicting-course-evaluation-scores.html#cb149-2" aria-hidden="true" tabindex="-1"></a>                   eval_response_rate <span class="sc">+</span> prof_ave_beauty_rating <span class="sc">+</span></span>
<span id="cb149-3"><a href="predicting-course-evaluation-scores.html#cb149-3" aria-hidden="true" tabindex="-1"></a>                   non_native_english <span class="sc">+</span> female <span class="sc">+</span> multiple_prof <span class="sc">+</span></span>
<span id="cb149-4"><a href="predicting-course-evaluation-scores.html#cb149-4" aria-hidden="true" tabindex="-1"></a>                   ave_teaching_qual<span class="sc">:</span>non_native_english <span class="sc">+</span> ave_teaching_qual<span class="sc">:</span>female <span class="sc">+</span> </span>
<span id="cb149-5"><a href="predicting-course-evaluation-scores.html#cb149-5" aria-hidden="true" tabindex="-1"></a>                   ave_teaching_qual<span class="sc">:</span>multiple_prof,</span>
<span id="cb149-6"><a href="predicting-course-evaluation-scores.html#cb149-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> teaching_train, </span>
<span id="cb149-7"><a href="predicting-course-evaluation-scores.html#cb149-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">refresh =</span> <span class="dv">0</span>)</span>
<span id="cb149-8"><a href="predicting-course-evaluation-scores.html#cb149-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-9"><a href="predicting-course-evaluation-scores.html#cb149-9" aria-hidden="true" tabindex="-1"></a><span class="fu">stan_glm_loo_comp</span>(lm_min,lm_5, <span class="at">as_kable =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Metric</th>
<th align="right">lm_min</th>
<th align="right">lm_5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">elpd_diff</td>
<td align="right">0.0000000</td>
<td align="right">-77.887273</td>
</tr>
<tr class="even">
<td align="left">se_diff</td>
<td align="right">0.0000000</td>
<td align="right">13.981130</td>
</tr>
<tr class="odd">
<td align="left">elpd_loo</td>
<td align="right">-173.0884824</td>
<td align="right">-250.975755</td>
</tr>
<tr class="even">
<td align="left">se_elpd_loo</td>
<td align="right">16.4984436</td>
<td align="right">16.917053</td>
</tr>
<tr class="odd">
<td align="left">p_loo</td>
<td align="right">3.1546102</td>
<td align="right">9.256360</td>
</tr>
<tr class="even">
<td align="left">se_p_loo</td>
<td align="right">0.5467246</td>
<td align="right">1.197869</td>
</tr>
<tr class="odd">
<td align="left">looic</td>
<td align="right">346.1769648</td>
<td align="right">501.951510</td>
</tr>
<tr class="even">
<td align="left">se_looic</td>
<td align="right">32.9968872</td>
<td align="right">33.834106</td>
</tr>
<tr class="odd">
<td align="left">r2</td>
<td align="right">0.5398558</td>
<td align="right">0.301848</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="predicting-course-evaluation-scores.html#cb150-1" aria-hidden="true" tabindex="-1"></a>lm_5</span></code></pre></div>
<pre><code>## stan_glm
##  family:       gaussian [identity]
##  formula:      course_evaluation ~ eval_response_rate + prof_ave_beauty_rating + 
##     non_native_english + female + multiple_prof + ave_teaching_qual:non_native_english + 
##     ave_teaching_qual:female + ave_teaching_qual:multiple_prof
##  observations: 371
##  predictors:   9
## ------
##                                      Median MAD_SD
## (Intercept)                           3.7    0.1  
## eval_response_rate                    0.0    0.0  
## prof_ave_beauty_rating                0.1    0.0  
## non_native_english                   -0.5    1.6  
## female                               -2.8    0.4  
## multiple_prof                        -2.1    0.5  
## non_native_english:ave_teaching_qual  0.1    0.4  
## female:ave_teaching_qual              0.6    0.1  
## multiple_prof:ave_teaching_qual       0.5    0.1  
## 
## Auxiliary parameter(s):
##       Median MAD_SD
## sigma 0.5    0.0   
## 
## ------
## * For help interpreting the printed output see ?print.stanreg
## * For info on the priors used see ?prior_summary.stanreg</code></pre>
</div>
<div id="summary-of-model-fitting-process" class="section level3" number="4.3.7">
<h3><span class="header-section-number">4.3.7</span> Summary of model fitting process</h3>
<p>This looks like about the end of the road in terms of trying out combinations of features to improve the predictive performance of the model (as estimated by the log score). I could try some feature engineering on the predictors and outcome variable (e.g. centering and scaling, transformation aimed at producing more normal distributions). However, in light of the findings of the 4 model fitting iterations above I think it is unlikely that feature engineering would considerably improve the performance of the model. Unfortunately, with the data to hand it looks like it is going to be challenging greatly improve the model’s performance. So, ideally it would be a case of conducting further studies gather data on a wider range of variables. Perhaps including variables that qualitatively encode something of a professor teaching style/approach. And/or variables such as the average marks awarded to students on the course before the evaluation had taken place.</p>
<p>The r squared value for the minimal and best performing model is 0.542. Which indicates that the very simple one-predictor model is explaining just over half the variance in <code>course_evaluation</code>.</p>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="estimating-the-proportion-of-plastic-waste-countries-mismanage.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualising-green-space-deprivation-across-the-english-regions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03_beauty.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
